<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DIB Jobs // Defense Industrial Base Jobs</title>
    <meta name="description" content="A job matching and application toolkit built for Defense Industrial Base professionals.">
    <link rel="canonical" href="https://dibjobs.com/">
    <!-- Open Graph / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="DIB Jobs - Defense Industrial Base Job Fit">
    <meta property="og:description" content="A job matching and application toolkit for Defense Industrial Base professionals. Resume fit, gap analysis, interview prep, and job intel.">
    <meta property="og:url" content="https://dibjobs.com/">
    <meta property="og:image" content="https://dibjobs.com/dibjobs.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="DIB Jobs - Defense Industrial Base Job Fit">
    <meta name="twitter:description" content="See how your resume stacks up against real DIB roles. Match score, gaps, interview prep, and job intel.">
    <meta name="twitter:image" content="https://dibjobs.com/dibjobs.png">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N10ZLNFZHE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-N10ZLNFZHE');
    </script>
<style>
    :root {
        /* Palette - Soft Blue & Cream Theme */
        --deep-blue: #4a6a8a;
        --soft-blue: #93b5d9;
        --pale-blue: #c8dae8;
        --warm-cream: #f8f6f1;
        
        /* Mapped Colors */
        --bg-cream: var(--warm-cream);
        --card-white: #FFFFFF;
        --ink-black: #3d4f5f;
        
        /* Accents */
        --accent-mint: var(--pale-blue);
        --accent-olive: var(--soft-blue);
        --accent-clay: #d4918a;
        --accent-gold: #e8c992;
        --accent-blue: var(--soft-blue);
        
        /* Spacing & Layout */
        --border-thick: 2px;
        --shadow-hard: 5px 5px 0px var(--ink-black);
        --shadow-hover: 2px 2px 0px var(--ink-black);
        --radius: 6px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        background-color: #ffffff;
        color: var(--ink-black);
        font-family: 'DM Sans', sans-serif;
        line-height: 1.6;
        min-height: 100vh;
        padding-bottom: 80px;
    }
    /* TYPOGRAPHY */
    h1, h2, h3, .mono { font-family: 'Space Mono', monospace; }
    /* HEADER */
    header {
        background: var(--card-white);
        padding: 16px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .brand {
        display: flex;
        align-items: center;
        gap: 14px;
    }
    .logo-icon {
        width: 44px;
        height: 44px;
        flex-shrink: 0;
    }
    .brand-text {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }
    .app-title {
        font-family: 'Space Mono', monospace;
        font-size: 22px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: -0.5px;
        line-height: 1.1;
        color: var(--ink-black);
    }
    .app-subtitle {
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--ink-black);
    }
    @media (max-width: 500px) {
        header {
            padding: 12px 16px;
        }
        .brand {
            gap: 10px;
        }
        .logo-icon {
            width: 36px;
            height: 36px;
        }
        .app-title {
            font-size: 18px;
        }
        .app-subtitle {
            font-size: 9px;
            letter-spacing: 0.3px;
        }
    }
    .logo-box {
        width: 48px;
        height: 48px;
        background: var(--ink-black);
        color: var(--bg-cream);
        display: grid;
        place-items: center;
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        font-size: 28px;
        border-radius: var(--radius);
    }
    /* MAIN CONTAINER */
    main {
        max-width: 1200px;
        margin: 20px auto; /* Reduced from 40px */
        padding: 0 20px;
    }
    /* CARDS */
    .card {
        background: var(--card-white);
        border: var(--border-thick) solid var(--ink-black);
        border-radius: var(--radius);
        box-shadow: var(--shadow-hard);
        margin-bottom: 32px;
        overflow: hidden;
        transition: transform 0.2s ease;
    }
    .card-header {
        background: var(--accent-mint);
        border-bottom: var(--border-thick) solid var(--ink-black);
        padding: 16px 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .card-title {
        font-size: 14px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .card-title::before {
        content: '';
        display: inline-block;
        width: 12px;
        height: 12px;
        background: var(--ink-black);
        border-radius: 50%;
    }
    .card-title.has-avatar::before {
        display: none;
    }
    /* Resume controls - responsive */
    .resume-controls {
        display: flex;
        gap: 8px;
        align-items: center;
    }
    .resume-controls select {
        padding: 6px 10px;
        font-size: 11px;
        font-family: 'Space Mono', monospace;
        border: 2px solid var(--ink-black);
        border-radius: var(--radius);
        background: var(--card-white);
        cursor: pointer;
        max-width: 180px;
    }
    @media (max-width: 500px) {
        .resume-controls {
            width: 100%;
            justify-content: flex-end;
        }
        .resume-controls select {
            flex: 1;
            max-width: none;
        }
    }
    .card-body {
        padding: 32px;
    }
    /* FORMS & INPUTS */
    textarea {
        width: 100%;
        min-height: 160px;
        padding: 20px;
        font-family: 'Space Mono', monospace;
        font-size: 16px;
        border: var(--border-thick) solid var(--ink-black);
        border-radius: var(--radius);
        background: #FAFAFA;
        resize: vertical;
        transition: all 0.2s;
    }
    textarea:focus {
        outline: none;
        background: #FFFFFF;
        box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        border-color: var(--ink-black);
    }
    /* BUTTONS */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 12px 24px;
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        font-size: 14px;
        text-transform: uppercase;
        color: var(--ink-black);
        background: var(--card-white);
        border: var(--border-thick) solid var(--ink-black);
        border-radius: var(--radius);
        cursor: pointer;
        box-shadow: var(--shadow-hard);
        transition: all 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        transform: translate(0, 0);
    }
    .btn:hover:not(:disabled) {
        transform: translate(-2px, -2px);
        box-shadow: 7px 7px 0 var(--ink-black);
    }
    .btn:active:not(:disabled) {
        transform: translate(2px, 2px);
        box-shadow: 1px 1px 0 var(--ink-black);
    }
    .btn-primary { background: var(--accent-mint); }
    .btn-primary:hover:not(:disabled) { background: var(--soft-blue); }
    .btn-secondary { background: var(--card-white); }
    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        background: #eee;
        box-shadow: none;
        transform: none;
    }
    .action-bar {
        margin-top: 20px;
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
    }
    /* INPUT GRID (for Hunter-Killer search) */
    .input-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }
    .input-grid input {
        width: 100%;
        padding: 10px;
        border: 2px solid var(--ink-black);
        border-radius: 4px;
        font-family: 'Space Mono', monospace;
        font-size: 14px;
        background: #FAFAFA;
        transition: all 0.2s;
    }
    .input-grid input:focus {
        outline: none;
        background: #FFFFFF;
        box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
    }
    @media (max-width: 768px) {
        .input-grid {
            grid-template-columns: 1fr;
        }
    }
    /* SEARCH SECTION STYLES */
    .section-label {
        font-family: 'Space Mono', monospace;
        font-size: 13px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 4px;
    }
    .section-desc {
        font-size: 13px;
        opacity: 0.7;
        margin-bottom: 8px;
    }
    .section-divider {
        border: none;
        border-top: 2px dashed var(--ink-black);
        margin: 28px 0;
        opacity: 0.3;
    }
    /* JOB SEARCH PANEL (Tag Cloud) */
    .tag-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .job-tag {
        display: inline-block;
        padding: 6px 14px;
        font-size: 12px;
        font-weight: 600;
        text-decoration: none;
        color: var(--ink-black);
        background: var(--bg-cream);
        border: 1px solid var(--ink-black);
        border-radius: 20px;
        transition: all 0.15s;
        box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
    }
    .job-tag:hover {
        background: var(--ink-black);
        color: var(--card-white);
        transform: translateY(-2px);
        box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
    }
    .category-group { margin-bottom: 24px; }
    .category-label {
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 1px;
        opacity: 0.6;
        margin-bottom: 12px;
        display: block;
    }
    /* SCORE HERO */
    .hero-grid {
        display: grid;
        grid-template-columns: 200px 1fr;
        border-bottom: var(--border-thick) solid var(--ink-black);
    }
    .score-box {
        background: var(--ink-black);
        color: var(--card-white);
        padding: 40px 20px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .score-val {
        font-family: 'Space Mono', monospace;
        font-size: 80px;
        line-height: 1;
        font-weight: 700;
    }
    .score-label {
        font-family: 'Space Mono', monospace;
        text-transform: uppercase;
        font-size: 12px;
        letter-spacing: 2px;
        opacity: 0.8;
        margin-top: 10px;
    }
    .verdict-box {
        padding: 32px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: var(--bg-cream);
    }
        .score-high .score-box { background: var(--accent-olive); color: #fff; }
    .score-high .score-label { opacity: 0.9; }
    .score-mid .score-box { background: var(--accent-gold); color: var(--ink-black); }
    .score-low .score-box { background: var(--accent-clay); color: #fff; }
    /* LISTS (Matches & Gaps) */
    .analysis-list { list-style: none; display: flex; flex-direction: column; gap: 16px; }
    .analysis-item {
        padding: 16px 20px;
        border: 2px solid var(--ink-black);
        border-radius: var(--radius);
        font-size: 14px;
        background: #fff;
        position: relative;
    }
    .analysis-item strong {
        display: block;
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        text-transform: uppercase;
        margin-bottom: 6px;
    }
    .item-match {
        background: rgba(107, 155, 122, 0.12);
        border-left: 8px solid var(--accent-olive);
    }
    .item-match strong { color: var(--deep-blue); }
    .item-gap {
        background: rgba(209, 143, 122, 0.12);
        border-left: 8px solid var(--accent-clay);
    }
    .item-gap strong { color: #b5705e; }
    /* Q&A STYLES */
    .qa-card {
        background: #fff;
        border: 2px solid var(--ink-black);
        margin-bottom: 20px;
        box-shadow: 4px 4px 0 rgba(0,0,0,0.05);
    }
    .qa-q {
        background: var(--accent-mint);
        padding: 12px 20px;
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        font-size: 13px;
        border-bottom: 2px solid var(--ink-black);
    }
    .qa-a {
        padding: 20px;
        font-size: 14px;
        line-height: 1.6;
    }
    /* RESUME PREVIEW */
    .resume-paper {
        background: #fff;
        padding: 40px;
        border: 1px solid #ddd;
        font-size: 14px;
        line-height: 1.6;
        box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
    }
    .resume-paper h2 {
        font-size: 14px;
        border-bottom: 2px solid #000;
        margin: 24px 0 12px 0;
        padding-bottom: 4px;
        text-transform: uppercase;
    }
    /* COPY TOAST */
    .copy-notice {
        position: fixed; 
        bottom: 30px; 
        right: 30px; 
        background: var(--ink-black); 
        color: var(--card-white); 
        padding: 16px 24px; 
        font-family: 'Space Mono'; 
        font-weight: 700; 
        border-radius: 6px; 
        transform: translateY(100px); 
        opacity: 0; 
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        z-index: 999;
    }
    /* ERROR TOAST */
    .error-toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: var(--accent-clay);
        color: var(--ink-black);
        padding: 16px 24px;
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        font-size: 13px;
        border-radius: var(--radius);
        border: var(--border-thick) solid var(--ink-black);
        box-shadow: var(--shadow-hard);
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 1000;
        max-width: 90%;
        text-align: center;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .error-toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
    .error-toast::before {
        content: '⚠';
        font-size: 18px;
    }
    .error-toast-close {
        background: none;
        border: none;
        color: var(--ink-black);
        font-size: 18px;
        cursor: pointer;
        padding: 0 0 0 12px;
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        opacity: 0.7;
        transition: opacity 0.2s;
    }
    .error-toast-close:hover {
        opacity: 1;
    }
    /* INLINE ERROR MESSAGE (for form validation) */
    .inline-error {
        background: rgba(209, 143, 122, 0.15);
        border: 2px solid var(--accent-clay);
        border-left: 6px solid var(--accent-clay);
        border-radius: var(--radius);
        padding: 16px 20px;
        margin-top: 16px;
        font-family: 'Space Mono', monospace;
        font-size: 13px;
        color: #b5705e;
        display: none;
        align-items: center;
        gap: 12px;
        animation: shake 0.4s ease-in-out;
    }
    .inline-error.show {
        display: flex;
    }
    .inline-error::before {
        content: '✕';
        font-size: 16px;
        font-weight: 700;
        flex-shrink: 0;
    }
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20%, 60% { transform: translateX(-6px); }
        40%, 80% { transform: translateX(6px); }
    }
    /* COPY BUTTON SUCCESS STATE */
    .btn.copy-success {
        background: var(--accent-olive) !important;
        color: var(--ink-black);
        pointer-events: none;
    }
    /* HOW TO STEPS (used in Quick Start card) */
    .how-to-steps {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
    }
    .how-to-step {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
    .step-number {
        width: 36px;
        height: 36px;
        background: var(--ink-black);
        color: var(--card-white);
        font-family: 'Space Mono', monospace;
        font-weight: 700;
        font-size: 16px;
        display: grid;
        place-items: center;
        border-radius: 50%;
        flex-shrink: 0;
    }
    .step-content h3 {
        font-family: 'Space Mono', monospace;
        font-size: 13px;
        font-weight: 700;
        text-transform: uppercase;
        margin-bottom: 6px;
    }
    .step-content p {
        font-size: 14px;
        line-height: 1.5;
        opacity: 0.8;
    }
    .how-to-tip {
        margin-top: 20px;
        padding: 16px 20px;
        background: rgba(147, 181, 217, 0.3);
        border-left: 4px solid var(--accent-mint);
        border-radius: 0 var(--radius) var(--radius) 0;
        font-size: 13px;
    }
    .how-to-tip strong {
        font-family: 'Space Mono', monospace;
        text-transform: uppercase;
        font-size: 11px;
        letter-spacing: 0.5px;
    }
    /* COLLAPSIBLE CARDS */
    .collapsible-card {
        overflow: hidden;
    }
    .collapsible-trigger {
        cursor: pointer;
        user-select: none;
        transition: background 0.2s;
    }
    .collapsible-trigger:hover {
        background: #fff;
    }
    .collapsible-content {
        border-top: var(--border-thick) solid var(--ink-black);
    }
    .collapsible-card.collapsed .collapsible-content {
        display: none;
    }
    .collapsible-card.collapsed .collapsible-trigger {
        border-bottom: none;
    }
    @media (max-width: 768px) {
        .how-to-steps {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        .how-to-step {
            flex-direction: row;
            align-items: flex-start;
        }
        .step-content {
            flex: 1;
        }
    }
    /* RESPONSIVE & MOBILE */
    @media (max-width: 768px) {
        /* General Mobile Adjustments */
        .hero-grid { grid-template-columns: 1fr; }
        .score-box { padding: 30px 20px; flex-direction: column; gap: 10px; align-items: center; }
        .score-val { font-size: 96px; }
        .card-body { padding: 20px; }
        /* HEADER MOBILE */
        header { padding: 16px; }
        .brand {
            justify-content: flex-start;
            text-align: left;
        }
    }
    /* ANIMATIONS */
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    /* INTEL VALUES */
    .intel-value {
        font-family: 'Space Mono', monospace;
        font-size: 24px;
        font-weight: 700;
        color: var(--ink-black);
        margin-bottom: 4px;
    }
    .intel-label {
        font-size: 12px;
        opacity: 0.7;
    }
    
    /* ============================================
       STATS ROW
       ============================================ */
    .stats-row {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-bottom: 16px;
    }
    @media (max-width: 600px) {
        .stats-row { grid-template-columns: repeat(2, 1fr); }
    }
    .stat-item {
        background: var(--card-white);
        border: var(--border-thick) solid var(--ink-black);
        border-radius: 10px;
        padding: 12px 8px;
        text-align: center;
        box-shadow: 3px 3px 0 var(--ink-black);
    }
    .stat-item .stat-num {
        font-family: 'Space Mono', monospace;
        font-size: 24px;
        font-weight: 700;
        line-height: 1;
    }
    .stat-item .stat-lbl {
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.7;
        margin-top: 4px;
    }
    .stat-item.mint { background: var(--pale-blue); }
    .stat-item.clay { background: rgba(212, 145, 138, 0.3); }
    .stat-item.gold { background: rgba(232, 201, 146, 0.4); }
    .stat-item.blue { background: var(--pale-blue); }
    
    /* ============================================
       INTEL PANELS (3-column: Salary, Timeline, Competition)
       ============================================ */
    .intel-panels {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        margin-bottom: 16px;
    }
    @media (max-width: 900px) {
        .intel-panels { grid-template-columns: 1fr; }
    }
    .intel-panel {
        background: var(--card-white);
        border: var(--border-thick) solid var(--ink-black);
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow-hard);
    }
    .panel-title {
        font-family: 'Space Mono', monospace;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
        opacity: 0.6;
        margin-bottom: 12px;
        padding-bottom: 10px;
        border-bottom: 2px dashed var(--ink-black);
    }
    .panel-value {
        font-family: 'Space Mono', monospace;
        font-size: 22px;
        font-weight: 700;
        color: var(--ink-black);
        margin-bottom: 6px;
    }
    .panel-sub {
        font-size: 12px;
        opacity: 0.6;
        margin-bottom: 12px;
    }
    .panel-notes {
        font-size: 12px;
        font-style: italic;
        opacity: 0.7;
        line-height: 1.5;
        margin-top: 12px;
    }
    
    /* Timeline Visual */
    .timeline-visual { margin-top: 8px; }
    .timeline-track {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }
    .timeline-node {
        width: 28px;
        height: 28px;
        background: var(--ink-black);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Space Mono', monospace;
        font-size: 12px;
        font-weight: 700;
        flex-shrink: 0;
    }
    .timeline-line {
        flex: 1;
        height: 3px;
        background: linear-gradient(90deg, var(--pale-blue), var(--soft-blue));
    }
    .timeline-labels {
        display: flex;
        justify-content: space-between;
    }
    .tl-label-item {
        text-align: center;
        flex: 1;
    }
    .tl-label-item .tl-name {
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .tl-label-item .tl-time {
        font-size: 11px;
        opacity: 0.7;
    }

    /* Timeline Row (legacy compact) */
    .timeline-row {
        display: flex;
        justify-content: space-between;
        gap: 4px;
    }
    .tl-step { flex: 1; text-align: center; }
    .tl-dot {
        width: 24px;
        height: 24px;
        background: var(--ink-black);
        color: white;
        border-radius: 50%;
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 4px;
    }
    .tl-label {
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        text-transform: uppercase;
    }
    .tl-time { font-size: 10px; opacity: 0.7; }
    
    /* Supercard Sections */
    .supercard-section {
        border-top: 2px dashed var(--ink-black);
        padding-top: 14px;
        margin-top: 14px;
    }
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }
    .section-title {
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .section-meta {
        font-family: 'Space Mono', monospace;
        font-size: 10px;
        opacity: 0.6;
    }
    
    /* Small Button */
    .btn-sm { padding: 6px 12px; font-size: 10px; }
    
    /* KEYWORD CLOUD */
    .keyword-cloud {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    .keyword-tag {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        background: var(--card-white);
        border: 2px solid var(--ink-black);
        border-radius: 20px;
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.15s;
    }
    .keyword-tag:hover {
        background: var(--ink-black);
        color: var(--card-white);
    }
    .keyword-tag.in-resume {
        background: var(--accent-mint);
        border-color: var(--deep-blue);
    }
    .keyword-tag.missing {
        background: rgba(209, 143, 122, 0.2);
        border-color: var(--accent-clay);
    }
    /* KIT SECTIONS (collapsible grouped content) */
    .kit-section {
        padding: 20px 0;
    }
    .kit-section:first-child { padding-top: 24px; }
    .kit-section-title {
        font-family: 'Space Mono', monospace;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 12px;
        color: var(--ink-black);
    }
    .kit-divider {
        border: none;
        border-top: 1px dashed rgba(0,0,0,0.2);
        margin: 0;
    }
    .resume-paper.compact {
        font-size: 13px;
        padding: 16px;
        max-height: 300px;
        overflow-y: auto;
        white-space: pre-wrap;
    }
    /* NETWORK FINDER */
    .network-links {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .network-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        background: var(--card-white);
        border: 2px solid var(--ink-black);
        border-radius: var(--radius);
        font-family: 'Space Mono', monospace;
        font-size: 12px;
        font-weight: 600;
        text-decoration: none;
        color: var(--ink-black);
        box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        transition: all 0.15s;
    }
    .network-link:hover {
        transform: translate(-2px, -2px);
        box-shadow: 5px 5px 0 rgba(0,0,0,0.15);
        background: var(--accent-mint);
    }
    /* JOB SEARCH GRID */
    .job-search-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    .job-search-link {
        display: inline-block;
        padding: 8px 14px;
        background: var(--card-white);
        border: 2px solid var(--ink-black);
        border-radius: var(--radius);
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        font-weight: 600;
        text-decoration: none;
        color: var(--ink-black);
        transition: all 0.15s;
    }
    .job-search-link:hover {
        background: var(--ink-black);
        color: var(--card-white);
        transform: translate(-1px, -1px);
    }
    /* APPLICATION TRACKER */
    .tracker-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
    }
    .tracker-table th {
        font-family: 'Space Mono', monospace;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        text-align: left;
        padding: 10px 8px;
        background: var(--bg-cream);
        border: 2px solid var(--ink-black);
        white-space: nowrap;
    }
    .tracker-table td {
        padding: 10px 8px;
        border: 2px solid var(--ink-black);
        vertical-align: middle;
        font-size: 12px;
    }
    .tracker-table tr:hover td { background: rgba(147, 181, 217, 0.1); }
    /* Hide less important columns on mobile */
    @media (max-width: 600px) {
        .tracker-table th:nth-child(5),
        .tracker-table td:nth-child(5) { display: none; } /* Hide Date */
        .tracker-table th, .tracker-table td { padding: 8px 6px; font-size: 11px; }
        .tracker-table th { font-size: 9px; }
    }
    .status-pill {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        font-weight: 700;
        text-transform: uppercase;
    }
    .status-saved { background: var(--bg-cream); border: 1px solid var(--ink-black); }
    .status-applied { background: var(--accent-mint); color: var(--ink-black); }
    .status-interviewing { background: var(--accent-gold); color: var(--ink-black); }
    .status-offered { background: var(--accent-olive); color: #fff; }
    .status-rejected { background: var(--accent-clay); color: #fff; }
    .tracker-actions { display: flex; gap: 6px; }
    .tracker-btn {
        padding: 4px 8px;
        font-size: 10px;
        border: 1px solid var(--ink-black);
        background: var(--card-white);
        cursor: pointer;
        border-radius: 3px;
        font-family: 'Space Mono', monospace;
    }
    .tracker-btn:hover { background: var(--ink-black); color: var(--card-white); }
    /* FOLLOW-UP TEMPLATES */
    .template-tabs { display: flex; gap: 0; border-bottom: none; }
    .template-tab {
        padding: 12px 20px;
        font-family: 'Space Mono', monospace;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        background: var(--bg-cream);
        border: 2px solid var(--ink-black);
        border-bottom: none;
        cursor: pointer;
        margin-right: -2px;
        position: relative;
    }
    .template-tab.active { background: var(--card-white); z-index: 1; }
    .template-content {
        border: 2px solid var(--ink-black);
        padding: 20px;
        background: var(--card-white);
        margin-top: -2px;
    }
    .template-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 14px;
        line-height: 1.7;
        white-space: pre-wrap;
        background: #fafafa;
        padding: 20px;
        border: 1px dashed var(--ink-black);
        border-radius: var(--radius);
    }
    /* SALARY INTEL */
    .salary-range-bar {
        height: 24px;
        background: linear-gradient(90deg, var(--accent-clay) 0%, var(--accent-gold) 50%, var(--accent-mint) 100%);
        border-radius: 12px;
        position: relative;
        margin: 20px 0 30px;
        border: 2px solid var(--ink-black);
    }
    .salary-marker {
        position: absolute;
        top: -8px;
        width: 4px;
        height: 40px;
        background: var(--ink-black);
        transform: translateX(-50%);
    }
    .salary-marker::after {
        content: attr(data-label);
        position: absolute;
        top: 44px;
        left: 50%;
        transform: translateX(-50%);
        font-family: 'Space Mono', monospace;
        font-size: 10px;
        white-space: nowrap;
    }
    .salary-labels {
        display: flex;
        justify-content: space-between;
        font-family: 'Space Mono', monospace;
        font-size: 12px;
        margin-top: 8px;
    }
    /* TIMELINE */
    .timeline-estimate {
        display: flex;
        align-items: flex-start;
        gap: 0;
        margin: 16px 0;
        padding: 0 10px;
    }
    .timeline-step {
        flex: 1;
        text-align: center;
        position: relative;
    }
    .timeline-step::after {
        content: '';
        position: absolute;
        top: 12px;
        left: 50%;
        width: 100%;
        height: 2px;
        background: var(--ink-black);
    }
    .timeline-step:last-child::after { display: none; }
    .timeline-dot {
        width: 26px;
        height: 26px;
        background: var(--card-white);
        border: 2px solid var(--ink-black);
        border-radius: 50%;
        margin: 0 auto 6px;
        position: relative;
        z-index: 1;
        display: grid;
        place-items: center;
        font-size: 12px;
        font-weight: 700;
    }
    .timeline-label {
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        text-transform: uppercase;
        letter-spacing: -0.5px;
    }
    .timeline-days { font-size: 10px; opacity: 0.6; margin-top: 2px; }
    /* EMPTY STATE */
    .empty-tracker {
        text-align: center;
        padding: 40px;
        background: var(--bg-cream);
        border: 2px dashed var(--ink-black);
        border-radius: var(--radius);
    }
    .empty-tracker p { font-size: 14px; opacity: 0.7; margin-bottom: 16px; }
    @media (max-width: 768px) {
        .intel-grid { grid-template-columns: 1fr; }
        /* Timeline stays horizontal but smaller */
        .timeline-estimate { padding: 0 5px; margin: 12px 0; }
        .timeline-dot { width: 22px; height: 22px; font-size: 10px; }
        .timeline-label { font-size: 8px; }
        .timeline-days { font-size: 9px; }
        .timeline-step::after { top: 10px; }
    }
    /* ASK A RECRUITER CHAT - Neo Brutalist Style */
    .recruiter-message {
        padding: 20px;
        margin-bottom: 20px;
        font-size: 14px;
        line-height: 1.7;
        border: var(--border-thick) solid var(--ink-black);
        border-radius: var(--radius);
        box-shadow: var(--shadow-hard);
    }
    .recruiter-message p {
        margin-bottom: 12px;
    }
    .recruiter-message p:last-child {
        margin-bottom: 0;
    }
    .recruiter-message.user {
        background: var(--card-white);
        margin-left: 60px;
    }
    .user-label {
        display: inline-block;
        font-family: 'Space Mono', monospace;
        font-size: 10px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: var(--ink-black);
        color: var(--card-white);
        padding: 4px 10px;
        border-radius: 3px;
        margin-bottom: 12px;
    }
    .recruiter-message.assistant {
        background: var(--card-white);
        margin-right: 60px;
    }
    .recruiter-header {
        display: flex;
        align-items: center;
        gap: 14px;
        margin-bottom: 16px;
        padding-bottom: 16px;
        border-bottom: var(--border-thick) solid var(--ink-black);
    }
    .recruiter-avatar {
        width: 56px;
        height: 56px;
        object-fit: cover;
    }
    .recruiter-info {
        flex: 1;
    }
    .recruiter-name {
        font-family: 'Space Mono', monospace;
        font-size: 13px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--ink-black);
    }
    .recruiter-title {
        font-size: 11px;
        opacity: 0.7;
        margin-top: 3px;
    }
    .recruiter-badge {
        display: inline-block;
        font-family: 'Space Mono', monospace;
        font-size: 9px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        background: var(--accent-mint);
        color: var(--ink-black);
        padding: 4px 8px;
        border-radius: 3px;
        border: 1px solid var(--ink-black);
    }
    .recruiter-thinking {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 20px;
        background: var(--bg-cream);
        border: var(--border-thick) dashed var(--ink-black);
        border-radius: var(--radius);
        margin-right: 60px;
        margin-bottom: 20px;
        font-family: 'Space Mono', monospace;
        font-size: 12px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--ink-black);
    }
    .recruiter-thinking::before {
        content: '';
        width: 20px;
        height: 20px;
        border: 3px solid var(--ink-black);
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }
    @media (max-width: 768px) {
        .recruiter-message.user {
            margin-left: 20px;
        }
        .recruiter-message.assistant {
            margin-right: 20px;
        }
        .recruiter-thinking {
            margin-right: 20px;
        }
        .recruiter-avatar {
            width: 48px;
            height: 48px;
        }
    }
</style>
</head>
<body>
<header>
    <div class="brand">
               <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125"><path d="M93.764,38.143l-42-30.515c-1.053-0.764-2.475-0.764-3.527,0l-42,30.515c-1.051,0.764-1.491,2.118-1.09,3.354l16.043,49.374  c0.402,1.236,1.554,2.073,2.854,2.073h51.914c1.3,0,2.451-0.837,2.854-2.073l16.043-49.374  C95.255,40.261,94.814,38.907,93.764,38.143z M73.777,86.944H26.223L11.526,41.716L50,13.764l38.474,27.953L73.777,86.944z" fill="var(--ink-black)" stroke="var(--ink-black)" stroke-width="6"/>/><path d="M48.236,32.35L29.748,45.782c-1.051,0.764-1.491,2.118-1.09,3.354l7.062,21.735c0.402,1.236,1.554,2.073,2.854,2.073h22.854  c1.3,0,2.451-0.837,2.854-2.073l7.062-21.735c0.401-1.236-0.039-2.59-1.09-3.354L51.764,32.35  C50.711,31.586,49.289,31.586,48.236,32.35z M64.962,49.355l-5.715,17.589H40.753l-5.715-17.589L50,38.485L64.962,49.355z" stroke="var(--ink-black)" stroke-width="6"/></svg>
        <div class="brand-text">
            <div class="app-title">DIB Jobs</div>
            <div class="app-subtitle">Defense Industrial Base Jobs</div>
        </div>
    </div>
</header>
<main>
    <!-- QUICK START CARD (Collapsible, starts collapsed) -->
    <div id="quickStartCard" class="card collapsible-card collapsed">
        <div class="card-header collapsible-trigger" onclick="toggleQuickStart()" role="button" tabindex="0" aria-expanded="false" aria-controls="quickStartContent" aria-label="Toggle quick start guide" onkeydown="if(event.key==='Enter'||event.key===' '){toggleQuickStart();event.preventDefault();}">
            <span class="card-title">Quick Start</span>
            <span id="quickStartToggleIcon" class="mono" style="font-weight: 700; font-size: 20px;" aria-hidden="true">+</span>
        </div>
        <div id="quickStartContent" class="collapsible-content">
            <div class="card-body">
                <div class="how-to-steps">
                    <div class="how-to-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Add Your Resume</h3>
                            <p>Paste your resume text or upload a file. Your resume stays in your browser and is not stored.</p>
                        </div>
                    </div>
                    <div class="how-to-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Add a Job Description</h3>
                            <p>Paste the job description text or enter a URL and we'll fetch it for you.</p>
                        </div>
                    </div>
                    <div class="how-to-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Get Your Analysis</h3>
                            <p>Receive a fit score, gap analysis, interview prep, and tailored application materials.</p>
                        </div>
                    </div>
                </div>
                <div class="how-to-tip">
                    <strong>Features:</strong>
                    <ul style="margin: 12px 0 0 20px; line-height: 1.8;">
                        <li><strong>Fit Score:</strong> AI analyzes the job against your resume with a 0-100 fit score.</li>
                        <li><strong>Gap Analysis:</strong> Identifies your strongest matches and potential gaps.</li>
                        <li><strong>Job Intel:</strong> Salary estimates, hiring timeline, competition level, and company intel.</li>
                        <li><strong>Keywords:</strong> Important terms from the JD with a check on which are in your resume.</li>
                        <li><strong>Tailored Summary:</strong> AI-rewritten executive summary optimized for this role.</li>
                        <li><strong>Intro Email:</strong> Generate a professional intro email to send with your application.</li>
                        <li><strong>Interview Prep:</strong> Likely interview questions with suggested answers from your experience.</li>
                        <li><strong>Expert Q&A:</strong> Ask questions about the role, salary, gaps, or application strategy.</li>
                        <li><strong>Application Tracker:</strong> Save jobs locally and track your application status.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JOB SEARCH CARD (Collapsible) -->
    <div id="jobSearchCard" class="card collapsible-card collapsed">
        <div class="card-header collapsible-trigger" onclick="toggleJobSearch()" role="button" tabindex="0" aria-expanded="false">
            <span class="card-title">LinkedIn Job Boards</span>
            <span id="jobSearchToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
        </div>
        <div id="jobSearchContent" class="collapsible-content">
            <div class="card-body">
                <p style="margin-bottom: 16px; font-size: 13px; opacity: 0.8;">Quick links to Company Linkedin Job Boards.</p>
                
                <!-- Federal Primes -->
                <div style="margin-bottom: 20px;">
                    <div class="kit-section-title" style="margin-bottom: 10px;">Federal Primes</div>
                    <div class="job-search-grid">
                        <a href="https://www.linkedin.com/company/lockheed-martin/jobs/" target="_blank" class="job-search-link">Lockheed Martin</a>
                        <a href="https://www.linkedin.com/company/rtx/jobs/" target="_blank" class="job-search-link">RTX (Raytheon)</a>
                        <a href="https://www.linkedin.com/company/gdit/jobs/" target="_blank" class="job-search-link">GDIT</a>
                        <a href="https://www.linkedin.com/company/northrop-grumman-corporation/jobs/" target="_blank" class="job-search-link">Northrop Grumman</a>
                        <a href="https://www.linkedin.com/company/boeing/jobs/" target="_blank" class="job-search-link">Boeing</a>
                        <a href="https://www.linkedin.com/company/leidos/jobs/" target="_blank" class="job-search-link">Leidos</a>
                        <a href="https://www.linkedin.com/company/bae-systems/jobs/" target="_blank" class="job-search-link">BAE Systems</a>
                        <a href="https://www.linkedin.com/company/l3harris-technologies/jobs/" target="_blank" class="job-search-link">L3Harris</a>
                        <a href="https://www.linkedin.com/company/booz-allen-hamilton/jobs/" target="_blank" class="job-search-link">Booz Allen</a>
                        <a href="https://www.linkedin.com/company/saicinc/jobs/" target="_blank" class="job-search-link">SAIC</a>
                        <a href="https://www.linkedin.com/company/caci-international-inc/jobs/" target="_blank" class="job-search-link">CACI</a>
                        <a href="https://www.linkedin.com/company/mantech/jobs/" target="_blank" class="job-search-link">ManTech</a>
                        <a href="https://www.linkedin.com/company/peraton/jobs/" target="_blank" class="job-search-link">Peraton</a>
                        <a href="https://www.linkedin.com/company/anduril/jobs/" target="_blank" class="job-search-link">Anduril</a>
                        <a href="https://www.linkedin.com/company/palantir-technologies/jobs/" target="_blank" class="job-search-link">Palantir</a>
                        <a href="https://www.linkedin.com/company/shield-ai/jobs/" target="_blank" class="job-search-link">Shield AI</a>
                    </div>
                </div>
                
                <!-- CSPs -->
                <div style="margin-bottom: 20px;">
                    <div class="kit-section-title" style="margin-bottom: 10px;">Cloud Service Providers</div>
                    <div class="job-search-grid">
                        <a href="https://www.linkedin.com/company/amazon-web-services/jobs/" target="_blank" class="job-search-link">Amazon / AWS</a>
                        <a href="https://www.linkedin.com/company/microsoft/jobs/" target="_blank" class="job-search-link">Microsoft / Azure</a>
                        <a href="https://www.linkedin.com/company/google-cloud/jobs/" target="_blank" class="job-search-link">Google Cloud</a>
                        <a href="https://www.linkedin.com/company/oracle/jobs/" target="_blank" class="job-search-link">Oracle Cloud</a>
                        <a href="https://www.linkedin.com/company/ibm/jobs/" target="_blank" class="job-search-link">IBM Cloud</a>
                    </div>
                </div>
                
                <!-- SaaS -->
                <div style="margin-bottom: 20px;">
                    <div class="kit-section-title" style="margin-bottom: 10px;">SaaS & Platforms</div>
                    <div class="job-search-grid">
                        <a href="https://www.linkedin.com/company/salesforce/jobs/" target="_blank" class="job-search-link">Salesforce</a>
                        <a href="https://www.linkedin.com/company/servicenow/jobs/" target="_blank" class="job-search-link">ServiceNow</a>
                        <a href="https://www.linkedin.com/company/snowflake-computing/jobs/" target="_blank" class="job-search-link">Snowflake</a>
                        <a href="https://www.linkedin.com/company/databricks/jobs/" target="_blank" class="job-search-link">Databricks</a>
                        <a href="https://www.linkedin.com/company/atlassian/jobs/" target="_blank" class="job-search-link">Atlassian</a>
                        <a href="https://www.linkedin.com/company/palo-alto-networks/jobs/" target="_blank" class="job-search-link">Palo Alto Networks</a>
                        <a href="https://www.linkedin.com/company/crowdstrike/jobs/" target="_blank" class="job-search-link">CrowdStrike</a>
                        <a href="https://www.linkedin.com/company/zscaler/jobs/" target="_blank" class="job-search-link">Zscaler</a>
                        <a href="https://www.linkedin.com/company/tenableinc/jobs/" target="_blank" class="job-search-link">Tenable</a>
                        <a href="https://www.linkedin.com/company/okta-inc-/jobs/" target="_blank" class="job-search-link">Okta</a>
                        <a href="https://www.linkedin.com/company/splunk/jobs/" target="_blank" class="job-search-link">Splunk</a>
                    </div>
                </div>
                
                <!-- Systems Integrators -->
                <div style="margin-bottom: 20px;">
                    <div class="kit-section-title" style="margin-bottom: 10px;">Systems Integrators</div>
                    <div class="job-search-grid">
                        <a href="https://www.linkedin.com/company/accenturefederalservices/jobs/" target="_blank" class="job-search-link">Accenture Federal</a>
                        <a href="https://www.linkedin.com/company/deloitte/jobs/" target="_blank" class="job-search-link">Deloitte</a>
                        <a href="https://www.linkedin.com/company/pwc/jobs/" target="_blank" class="job-search-link">PwC</a>
                        <a href="https://www.linkedin.com/company/ernstandyoung/jobs/" target="_blank" class="job-search-link">EY</a>
                        <a href="https://www.linkedin.com/company/kpmg-us/jobs/" target="_blank" class="job-search-link">KPMG</a>
                        <a href="https://www.linkedin.com/company/capgemini/jobs/" target="_blank" class="job-search-link">Capgemini</a>
                    </div>
                </div>
                
                <!-- VARs & Resellers -->
                <div>
                    <div class="kit-section-title" style="margin-bottom: 10px;">VARs & Resellers</div>
                    <div class="job-search-grid">
                        <a href="https://www.linkedin.com/company/carahsoft/jobs/" target="_blank" class="job-search-link">Carahsoft</a>
                        <a href="https://www.linkedin.com/company/world-wide-technology/jobs/" target="_blank" class="job-search-link">WWT</a>
                        <a href="https://www.linkedin.com/company/iron-bow-technologies/jobs/" target="_blank" class="job-search-link">Iron Bow</a>
                        <a href="https://www.linkedin.com/company/presidio-/jobs/" target="_blank" class="job-search-link">Presidio</a>
                        <a href="https://www.linkedin.com/company/dxctechnology/jobs/" target="_blank" class="job-search-link">DXC Technology</a>
                        <a href="https://www.linkedin.com/company/cgi/jobs/" target="_blank" class="job-search-link">CGI Federal</a>
                        <a href="https://www.linkedin.com/company/red-river-technology/jobs/" target="_blank" class="job-search-link">Red River</a>
                        <a href="https://www.linkedin.com/company/thundercat-technology/jobs/" target="_blank" class="job-search-link">ThunderCat</a>
                    </div>
                </div>
                
                <!-- Job Boards -->
                <hr style="margin: 24px 0; border: none; border-top: 1px dashed var(--ink-black); opacity: 0.3;">
                <div>
                    <div class="kit-section-title" style="margin-bottom: 10px;">Cleared Job Boards</div>
                    <div class="job-search-grid">
                        <a href="https://www.clearancejobs.com/jobs?keywords=sales" target="_blank" class="job-search-link">ClearanceJobs</a>
                        <a href="https://www.linkedin.com/jobs/search/?keywords=director&f_TPR=r604800" target="_blank" class="job-search-link">LinkedIn</a>
                        <a href="https://www.indeed.com/jobs?q=federal+sales" target="_blank" class="job-search-link">Indeed</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- RESUME INPUT CARD (Collapsible) -->
    <div id="resumeCard" class="card collapsible-card">
        <div class="card-header collapsible-trigger" onclick="toggleInputCard('resume')" style="cursor: pointer; flex-wrap: wrap; gap: 12px;">
            <span class="card-title">Paste Resume</span>
            <div style="display: flex; align-items: center; gap: 12px;">
                <span id="resumeStatus" style="font-size: 11px; opacity: 0.6;"></span>
                <span id="resumeToggle" class="mono" style="font-weight: 700; font-size: 20px;">−</span>
            </div>
        </div>
        <div id="resumeContent" class="collapsible-content">
            <div class="card-body">
                <div class="resume-controls" style="margin-bottom: 12px; display: flex; gap: 8px; flex-wrap: wrap;">
                    <select id="resumeSelector" onchange="loadSavedResume()" aria-label="Select saved resume" style="flex: 1; min-width: 150px;">
                        <option value="">-- Saved Resumes --</option>
                    </select>
                    <button class="btn btn-secondary" onclick="saveCurrentResume()" style="padding: 6px 12px; font-size: 11px;">Save</button>
                    <button class="btn btn-secondary" onclick="clearResume()" style="padding: 6px 12px; font-size: 11px;">Clear</button>
                </div>
                <textarea id="resumeText" placeholder="Paste your resume text here..." aria-label="Resume input" style="min-height: 120px;"></textarea>
                <div style="margin-top: 16px; padding: 14px 18px; background: var(--bg-cream); border-radius: var(--radius); font-size: 12px; line-height: 1.6;">
                    <strong style="font-family: 'Space Mono', monospace; text-transform: uppercase; font-size: 10px; letter-spacing: 0.5px;">Privacy Notice:</strong>
                    <ul style="margin: 8px 0 0 16px; opacity: 0.8;">
                        <li>Your resume is <strong>not stored</strong> on our servers</li>
                        <li>Data is sent to Google Gemini AI for analysis</li>
                        <li>Google's API does not use your data for model training</li>
                        <li>Saved resumes are stored locally in your browser only</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JOB DESCRIPTION CARD (Collapsible) -->
    <div id="jobCard" class="card collapsible-card">
        <div class="card-header collapsible-trigger" onclick="toggleInputCard('job')" style="cursor: pointer;">
            <span class="card-title">Paste Job Description</span>
            <div style="display: flex; align-items: center; gap: 12px;">
                <span id="jobStatus" style="font-size: 11px; opacity: 0.6;"></span>
                <span id="jobToggle" class="mono" style="font-weight: 700; font-size: 20px;">−</span>
            </div>
        </div>
        <div id="jobContent" class="collapsible-content">
            <div class="card-body">
                <textarea id="jobDescription" placeholder="Paste job description text or a URL..." aria-label="Job description input"></textarea>
                <div class="action-bar">
                    <button id="analyzeBtn" class="btn btn-primary" onclick="analyzeJob()" aria-label="Analyze job match">
                        <span id="btnText">Analyze Job Fit</span>
                    </button>
                    <button class="btn btn-secondary" onclick="clearAll()" aria-label="Reset form and clear results">Reset</button>
                    <button class="btn btn-secondary" onclick="loadSampleData()" aria-label="Load sample data">Sample</button>
                </div>
                <div id="inlineError" class="inline-error" role="alert" aria-live="polite">
                    <span id="inlineErrorText"></span>
                </div>
            </div>
        </div>
    </div>

    <div id="loadingCard" class="card" style="display:none; text-align:center; padding: 48px 24px; background: var(--bg-cream); border: 2px dashed var(--ink-black);">
        <div class="spinner-box" style="margin-bottom: 24px;">
            <div style="display:inline-block; width: 40px; height: 40px; border: 4px solid var(--ink-black); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        </div>
        <h2 id="loadingStep" style="font-size: 18px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 16px;">
            Initializing Neural Net...
        </h2>
        <div style="max-width: 400px; margin: 0 auto; border: 2px solid var(--ink-black); height: 24px; border-radius: 12px; background: #fff; overflow: hidden; position: relative;">
            <div id="loadingProgress" style="width: 5%; height: 100%; background: var(--accent-mint); border-right: 2px solid var(--ink-black); transition: width 0.3s ease;"></div>
        </div>
        <p style="margin-top: 16px; font-family: 'Space Mono'; font-size: 11px; opacity: 0.6;">
            Analyzing your resume against job requirements...
        </p>
    </div>

    <div id="analysisResults" style="display: none;">
        <!-- UNIFIED SUPER CARD -->
        <div class="card supercard">
            <!-- SCORE HEADER -->
            <div id="matchScoreContainer" class="hero-grid">
            </div>
            
            <div class="card-body" style="padding: 16px;">
                <!-- STATS ROW -->
                <div class="stats-row">
                    <div class="stat-item mint">
                        <div class="stat-num" id="strengthsCount">0</div>
                        <div class="stat-lbl">Strengths</div>
                    </div>
                    <div class="stat-item clay">
                        <div class="stat-num" id="gapsCount">0</div>
                        <div class="stat-lbl">Gaps</div>
                    </div>
                    <div class="stat-item gold">
                        <div class="stat-num" id="keywordsPercent">0%</div>
                        <div class="stat-lbl">Keywords</div>
                    </div>
                    <div class="stat-item blue">
                        <div class="stat-num" id="salaryEstimate">$---K</div>
                        <div class="stat-lbl">Salary Est.</div>
                    </div>
                </div>
                
                <!-- INTEL PANELS (Salary, Timeline, Competition) -->
                <div class="intel-panels">
                    <div class="intel-panel">
                        <div class="panel-title">Salary Estimate</div>
                        <div id="salaryIntel">
                            <div class="panel-value" id="salaryRange">$---K - $---K</div>
                            <div class="panel-sub">Based on role level & market</div>
                            <div class="salary-range-bar">
                                <div class="salary-marker" style="left: 50%;" data-label="Target"></div>
                            </div>
                            <div class="salary-labels">
                                <span id="salaryLow">$0K</span>
                                <span id="salaryHigh">$0K</span>
                            </div>
                        </div>
                    </div>
                    <div class="intel-panel">
                        <div class="panel-title">Hiring Timeline</div>
                        <div id="hiringTimeline" class="timeline-visual">
                            <div class="timeline-track">
                                <div class="timeline-node"><span>1</span></div>
                                <div class="timeline-line"></div>
                                <div class="timeline-node"><span>2</span></div>
                                <div class="timeline-line"></div>
                                <div class="timeline-node"><span>3</span></div>
                                <div class="timeline-line"></div>
                                <div class="timeline-node"><span>4</span></div>
                            </div>
                            <div class="timeline-labels">
                                <div class="tl-label-item"><div class="tl-name">Apply</div><div class="tl-time">Today</div></div>
                                <div class="tl-label-item"><div class="tl-name">Screen</div><div class="tl-time" id="screenTime">...</div></div>
                                <div class="tl-label-item"><div class="tl-name">Interview</div><div class="tl-time" id="interviewTime">...</div></div>
                                <div class="tl-label-item"><div class="tl-name">Offer</div><div class="tl-time" id="offerTime">...</div></div>
                            </div>
                        </div>
                        <div id="timelineNotes" class="panel-notes" style="display:none;"></div>
                    </div>
                    <div class="intel-panel">
                        <div class="panel-title">Competition Level</div>
                        <div class="panel-value" id="competitionLevel">---</div>
                        <div id="competitionDesc" class="panel-notes">Analyzing...</div>
                    </div>
                </div>
                
                <!-- KEYWORDS -->
                <div class="supercard-section">
                    <div class="section-header">
                        <span class="section-title">Keywords</span>
                        <span class="section-meta" id="keywordsCountLabel">0 matched, 0 missing (add to LinkedIn)</span>
                    </div>
                    <div class="keyword-cloud" id="keywordCloudNew"></div>
                    <button class="btn btn-sm" onclick="copyKeywordsNew()" style="margin-top: 10px;">Copy Keywords</button>
                </div>
                
                <!-- RESEARCH LINKS -->
                <div id="researchCompanySection" class="supercard-section">
                    <div class="section-header">
                        <span class="section-title">Research This Company</span>
                    </div>
                    <div id="researchLinks" class="network-links"></div>
                </div>
                
                <!-- SAVE BUTTON -->
                <div id="saveToTrackerSection" style="text-align: center; padding-top: 16px; border-top: 2px dashed var(--ink-black); margin-top: 16px; display: none;">
                    <button id="saveToTrackerBtn" class="btn btn-primary" onclick="saveToTracker()">Save to Tracker</button>
                </div>
            </div>
        </div>
        
        <!-- ASK EXPERT -->
        <div id="askRecruiterSection" class="card">
            <div class="card-header">
                <span class="card-title has-avatar" style="gap: 12px;">
                    <img src="arti.png" alt="Expert" style="width: 40px; height: 40px; border-radius: var(--radius);">
                    Ask Expert
                </span>
            </div>
            <div class="card-body" style="padding: 16px;">
                <textarea id="recruiterQuestion" placeholder="e.g. 'Is this salary competitive?'" style="min-height: 60px;" aria-label="Your question"></textarea>
                <div class="action-bar" style="margin-top: 10px;">
                    <button id="askRecruiterBtn" class="btn btn-primary" onclick="askExpert()" aria-label="Ask the expert">
                        <span id="askRecruiterBtnText">Ask</span>
                    </button>
                    <button class="btn btn-secondary" onclick="clearExpertChat()">Clear</button>
                </div>
                <div id="recruiterChatHistory" style="margin-top: 16px; display: none;"></div>
            </div>
        </div>
        
        <!-- STRENGTHS CARD (collapsible, starts collapsed) -->
        <div id="strengthsCard" class="card collapsible-card collapsed" style="display: none;">
            <div class="card-header collapsible-trigger" onclick="toggleResultCard('strengths')" style="cursor: pointer;">
                <span class="card-title">Your Strengths</span>
                <span id="strengthsToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
            </div>
            <div id="strengthsContent" class="collapsible-content">
                <div class="card-body">
                    <ul id="strengthsList" class="analysis-list"></ul>
                </div>
            </div>
        </div>
        
        <!-- GAPS CARD (collapsible, starts collapsed) -->
        <div id="gapsCard" class="card collapsible-card collapsed" style="display: none;">
            <div class="card-header collapsible-trigger" onclick="toggleResultCard('gaps')" style="cursor: pointer;">
                <span class="card-title">Gaps to Address</span>
                <span id="gapsToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
            </div>
            <div id="gapsContent" class="collapsible-content">
                <div class="card-body">
                    <ul id="gapsList" class="analysis-list"></ul>
                </div>
            </div>
        </div>
        <!-- APPLICATION KIT (Collapsible: keywords, resume, intro email) -->
        <div id="applicationKitCard" class="card collapsible-card collapsed">
            <div class="card-header collapsible-trigger" onclick="toggleKit('application')" role="button" tabindex="0" aria-expanded="false">
                <span class="card-title">Application Kit</span>
                <span id="applicationKitToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
            </div>
            <div id="applicationKitContent" class="collapsible-content">
                <div class="card-body" style="padding-top: 0;">
                    <!-- Keywords -->
                    <div id="keywordSection" class="kit-section">
                        <h4 class="kit-section-title">Keywords to Add</h4>
                        <p style="margin-bottom: 12px; font-size: 13px; opacity: 0.7;"><span style="background: var(--accent-mint); padding: 2px 6px; border-radius: 3px;">Green</span> = in resume. <span style="background: rgba(209, 143, 122, 0.3); padding: 2px 6px; border-radius: 3px;">Orange</span> = missing.</p>
                        <div class="keyword-cloud" id="keywordCloud"></div>
                        <button class="btn btn-secondary" onclick="copyKeywords()" style="margin-top: 12px; padding: 6px 12px; font-size: 11px;">Copy Keywords</button>
                    </div>
                    
                    <hr class="kit-divider">
                    
                    <!-- Tailored Resume -->
                    <div class="kit-section">
                        <h4 class="kit-section-title">Tailored Executive Summary</h4>
                        <div id="resumeOutput" class="resume-paper compact" role="region" aria-label="Tailored resume preview"></div>
                        <button class="btn btn-secondary" onclick="copyResume()" style="margin-top: 12px; padding: 6px 12px; font-size: 11px;">Copy Summary</button>
                    </div>
                    
                    <hr class="kit-divider">
                    
                    <!-- Intro Email -->
                    <div class="kit-section">
                        <h4 class="kit-section-title">Intro Email</h4>
                        <div id="coverLetterPlaceholder">
                            <button class="btn btn-primary" onclick="generateCoverLetter()" id="generateCoverLetterBtn" aria-label="Generate intro email">
                                Generate Intro Email
                            </button>
                        </div>
                        <div id="coverLetterDisplay" style="display:none; white-space: pre-wrap; font-family: 'DM Sans'; font-size: 14px; line-height: 1.6; background: #fff; padding: 16px; border: 1px solid #ddd; border-radius: var(--radius);" role="region"></div>
                        <button id="copyCLBtn" class="btn btn-secondary" onclick="copyCoverLetter()" style="display:none; margin-top: 12px; padding: 6px 12px; font-size: 11px;">Copy Email</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 6. INTERVIEW KIT (Collapsible: interview prep, gap strategies) -->
        <div id="interviewKitCard" class="card collapsible-card collapsed">
            <div class="card-header collapsible-trigger" onclick="toggleKit('interview')" role="button" tabindex="0" aria-expanded="false">
                <span class="card-title">Interview Kit</span>
                <span id="interviewKitToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
            </div>
            <div id="interviewKitContent" class="collapsible-content">
                <div class="card-body" style="padding-top: 0;">
                    <!-- Interview Questions -->
                    <div id="interviewQuestionsSection" class="kit-section">
                        <h4 class="kit-section-title">Likely Interview Questions</h4>
                        <div id="interviewQuestionsList"></div>
                    </div>
                    
                    <hr class="kit-divider">
                    
                    <!-- Gap Strategies -->
                    <div id="gapStrategiesSection" class="kit-section">
                        <h4 class="kit-section-title">Gap Mitigation Strategies</h4>
                        <div id="gapStrategiesList"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 7. OUTREACH KIT (Collapsible: network, templates) -->
        <div id="outreachKitCard" class="card collapsible-card collapsed">
            <div class="card-header collapsible-trigger" onclick="toggleKit('outreach')" role="button" tabindex="0" aria-expanded="false">
                <span class="card-title">Outreach Kit</span>
                <span id="outreachKitToggle" class="mono" style="font-weight: 700; font-size: 20px;">+</span>
            </div>
            <div id="outreachKitContent" class="collapsible-content">
                <div class="card-body" style="padding-top: 0;">
                    <!-- Network Intel -->
                    <div id="networkSection" class="kit-section">
                        <h4 class="kit-section-title">Find Connections at <span id="networkCompany">This Company</span></h4>
                        <div class="network-links" id="networkLinks"></div>
                    </div>
                    
                    <hr class="kit-divider">
                    
                    <!-- Follow-up Templates -->
                    <div id="templatesSection" class="kit-section">
                        <h4 class="kit-section-title">Follow-Up Templates</h4>
                        <div class="template-tabs">
                            <button class="template-tab active" onclick="showTemplate('applied')">After Applying</button>
                            <button class="template-tab" onclick="showTemplate('interview')">Post-Interview</button>
                            <button class="template-tab" onclick="showTemplate('followup')">Check-In</button>
                            <button class="template-tab" onclick="showTemplate('negotiate')">Negotiation</button>
                        </div>
                        <div class="template-content">
                            <div id="templateApplied" class="template-text"></div>
                            <div id="templateInterview" class="template-text" style="display:none;"></div>
                            <div id="templateFollowup" class="template-text" style="display:none;"></div>
                            <div id="templateNegotiate" class="template-text" style="display:none;"></div>
                            <button class="btn btn-secondary" onclick="copyCurrentTemplate()" style="margin-top: 12px; padding: 6px 12px; font-size: 11px;">Copy Template</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 8. SAVE TO TRACKER -->
        <div id="saveToTrackerSection" class="card" style="display:none; background: var(--accent-mint);">
            <div class="card-body" style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                <div>
                    <strong style="font-family: 'Space Mono', monospace; text-transform: uppercase; letter-spacing: 0.5px;">Save This Analysis</strong>
                    <p style="font-size: 13px; opacity: 0.8; margin-top: 4px;">Track your application status over time.</p>
                </div>
                <button class="btn btn-primary" onclick="saveToTracker()" id="saveToTrackerBtn">Save to Tracker</button>
            </div>
        </div>
    </div>
    
    <!-- APPLICATION TRACKER - NEW (Always visible) -->
    <div id="trackerCard" class="card">
        <div class="card-header">
            <span class="card-title">Application Tracker</span>
            <span id="trackerCount" style="font-family: 'Space Mono', monospace; font-size: 12px; opacity: 0.7;">0 jobs tracked</span>
        </div>
        <div class="card-body">
            <div id="trackerEmpty" class="empty-tracker">
                <p>No applications tracked yet. Analyze a job and click "Save to Tracker" to start tracking.</p>
            </div>
            <div id="trackerTableContainer" style="display: none; overflow-x: auto;">
                <table class="tracker-table">
                    <thead>
                        <tr>
                            <th>Company</th>
                            <th>Role</th>
                            <th>Score</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="trackerBody"></tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<script>
    // ==========================================================================
    // CONFIGURATION
    // ==========================================================================
    const API_ENDPOINT = 'https://76unm1rlj0.execute-api.us-east-1.amazonaws.com/default/grumpy2';
    const MAX_RETRIES = 3;
    const RETRY_DELAY_MS = 2000;
    const RESUME_STORAGE_KEY = 'dib_jobs_resumes';
    let analysisData = null;
    let loadingInterval = null;
    let resumeText = ''; // Store resume text for API calls
    
    // ==========================================================================
    // RESUME MANAGEMENT (localStorage)
    // ==========================================================================
    function getSavedResumes() {
        try {
            const saved = localStorage.getItem(RESUME_STORAGE_KEY);
            return saved ? JSON.parse(saved) : {};
        } catch (e) {
            console.error('Error reading saved resumes:', e);
            return {};
        }
    }
    
    function updateResumeSelector() {
        const selector = document.getElementById('resumeSelector');
        const resumes = getSavedResumes();
        const names = Object.keys(resumes);
        
        selector.innerHTML = '<option value="">-- Saved Resumes --</option>';
        if (names.length === 0) {
            selector.innerHTML += '<option value="" disabled>No saved resumes yet</option>';
        } else {
            names.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                selector.appendChild(option);
            });
            selector.innerHTML += '<option value="__delete__" style="color: #999;">Delete a resume...</option>';
        }
    }
    
    function saveCurrentResume() {
        const textarea = document.getElementById('resumeText');
        const text = textarea.value.trim();
        
        if (!text || text.length < 100) {
            showErrorToast('Please paste a resume first (at least 100 characters).');
            return;
        }
        
        const resumes = getSavedResumes();
        const existingNames = Object.keys(resumes);
        
        // Suggest a default name
        let defaultName = 'My Resume';
        if (existingNames.includes(defaultName)) {
            defaultName = `Resume ${existingNames.length + 1}`;
        }
        
        const name = prompt('Name this resume version:', defaultName);
        if (!name) return;
        
        const trimmedName = name.trim().substring(0, 50);
        if (!trimmedName) return;
        
        resumes[trimmedName] = {
            text: text,
            savedAt: new Date().toISOString()
        };
        
        try {
            localStorage.setItem(RESUME_STORAGE_KEY, JSON.stringify(resumes));
            updateResumeSelector();
            document.getElementById('resumeSelector').value = trimmedName;
            showErrorToast(`Resume "${trimmedName}" saved to browser.`, 3000);
        } catch (e) {
            showErrorToast('Could not save resume. Browser storage may be full.');
        }
    }
    
    function loadSavedResume() {
        const selector = document.getElementById('resumeSelector');
        const selectedName = selector.value;
        
        if (!selectedName) return;
        
        if (selectedName === '__delete__') {
            selector.value = '';
            deleteResumePrompt();
            return;
        }
        
        const resumes = getSavedResumes();
        if (resumes[selectedName]) {
            document.getElementById('resumeText').value = resumes[selectedName].text;
            showErrorToast(`Loaded "${selectedName}"`, 2000);
        }
    }
    
    function deleteResumePrompt() {
        const resumes = getSavedResumes();
        const names = Object.keys(resumes);
        
        if (names.length === 0) {
            showErrorToast('No saved resumes to delete.');
            return;
        }
        
        const name = prompt('Enter the exact name of the resume to delete:\n\nSaved resumes: ' + names.join(', '));
        if (!name) return;
        
        if (resumes[name]) {
            delete resumes[name];
            localStorage.setItem(RESUME_STORAGE_KEY, JSON.stringify(resumes));
            updateResumeSelector();
            showErrorToast(`Deleted "${name}"`, 3000);
        } else {
            showErrorToast(`Resume "${name}" not found.`);
        }
    }
    
    function loadLastUsedResume() {
        const resumes = getSavedResumes();
        const names = Object.keys(resumes);
        
        if (names.length > 0) {
            // Load the most recently saved resume
            let mostRecent = names[0];
            let mostRecentTime = resumes[names[0]].savedAt || '';
            
            names.forEach(name => {
                if (resumes[name].savedAt > mostRecentTime) {
                    mostRecent = name;
                    mostRecentTime = resumes[name].savedAt;
                }
            });
            
            document.getElementById('resumeText').value = resumes[mostRecent].text;
            document.getElementById('resumeSelector').value = mostRecent;
        }
    }
    
    // ==========================================================================
    // UTILITIES
    // ==========================================================================
    const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
    function escapeHtml(str) {
        if (!str) return '';
        return str.replace(/[&<>"']/g, m => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;' })[m]);
    }
    function startLoadingAnim() {
        const card = document.getElementById('loadingCard');
        const stepText = document.getElementById('loadingStep');
        const bar = document.getElementById('loadingProgress');
        // Show Card, Hide Results
        card.style.display = 'block';
        document.getElementById('analysisResults').style.display = 'none';
        // --- NEW: Scroll the loading card into view (centered) ---
        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
        // Animation Sequence
        let progress = 5;
        const steps = [
            { pct: 15, msg: "Reading Job Description..." },
            { pct: 35, msg: "Extracting Key Requirements..." },
            { pct: 55, msg: "Comparing Against Profile..." },
            { pct: 75, msg: "Identifying Strategic Gaps..." },
            { pct: 90, msg: "Drafting Interview Questions..." },
            { pct: 95, msg: "Finalizing Strategy..." }
        ];
        let stepIndex = 0;
        bar.style.width = '5%';
        stepText.innerText = steps[0].msg;
        loadingInterval = setInterval(() => {
            if (stepIndex < steps.length) {
                const step = steps[stepIndex];
                progress = step.pct;
                bar.style.width = `${progress}%`;
                stepText.innerText = step.msg;
                stepIndex++;
            }
        }, 800);
    }
    function stopLoadingAnim() {
        clearInterval(loadingInterval);
        const bar = document.getElementById('loadingProgress');
        const stepText = document.getElementById('loadingStep');
        bar.style.width = '100%';
        stepText.innerText = "Analysis Complete!";
        setTimeout(() => {
            document.getElementById('loadingCard').style.display = 'none';
        }, 500);
    }
    function showCopyNotice() {
        const el = document.getElementById('copyNotice');
        if(el) {
            el.style.opacity = '1';
            el.style.transform = 'translateY(0)';
            setTimeout(() => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(100px)';
            }, 2000);
        }
    }
    // ==========================================================================
    // ERROR HANDLING (Styled inline messages instead of alert())
    // ==========================================================================
    let errorToastTimeout = null;
    /**
     * Show inline error (for form validation errors - appears below the form)
     */
    function showInlineError(message) {
        const errorDiv = document.getElementById('inlineError');
        const errorText = document.getElementById('inlineErrorText');
        errorText.textContent = message;
        errorDiv.classList.remove('show');
        // Force reflow to restart animation
        void errorDiv.offsetWidth;
        errorDiv.classList.add('show');
        // Auto-hide after 8 seconds
        setTimeout(() => {
            hideInlineError();
        }, 8000);
    }
    function hideInlineError() {
        const errorDiv = document.getElementById('inlineError');
        errorDiv.classList.remove('show');
    }
    /**
     * Show error toast (for API/network errors - appears at bottom of screen)
     */
    function showErrorToast(message, duration = 6000) {
        const toast = document.getElementById('errorToast');
        const toastText = document.getElementById('errorToastText');
        // Clear any existing timeout
        if (errorToastTimeout) {
            clearTimeout(errorToastTimeout);
        }
        toastText.textContent = message;
        toast.classList.add('show');
        // Auto-hide after duration
        errorToastTimeout = setTimeout(() => {
            hideErrorToast();
        }, duration);
    }
    function hideErrorToast() {
        const toast = document.getElementById('errorToast');
        toast.classList.remove('show');
        if (errorToastTimeout) {
            clearTimeout(errorToastTimeout);
            errorToastTimeout = null;
        }
    }
    function toggleQuickStart() {
        const card = document.getElementById('quickStartCard');
        const icon = document.getElementById('quickStartToggleIcon');
        const trigger = card.querySelector('.collapsible-trigger');
        if (card.classList.contains('collapsed')) {
            card.classList.remove('collapsed');
            icon.textContent = '−';
            trigger.setAttribute('aria-expanded', 'true');
        } else {
            card.classList.add('collapsed');
            icon.textContent = '+';
            trigger.setAttribute('aria-expanded', 'false');
        }
    }
    function toggleJobSearch() {
        const card = document.getElementById('jobSearchCard');
        const icon = document.getElementById('jobSearchToggle');
        const trigger = card.querySelector('.collapsible-trigger');
        if (card.classList.contains('collapsed')) {
            card.classList.remove('collapsed');
            icon.textContent = '−';
            trigger.setAttribute('aria-expanded', 'true');
        } else {
            card.classList.add('collapsed');
            icon.textContent = '+';
            trigger.setAttribute('aria-expanded', 'false');
        }
    }
    function collapseAllCards() {
        // Collapse Quick Start
        const quickStartCard = document.getElementById('quickStartCard');
        const quickStartIcon = document.getElementById('quickStartToggleIcon');
        if (quickStartCard && !quickStartCard.classList.contains('collapsed')) {
            quickStartCard.classList.add('collapsed');
            quickStartIcon.textContent = '+';
            quickStartCard.querySelector('.collapsible-trigger').setAttribute('aria-expanded', 'false');
        }
        // Collapse Job Search
        const jobSearchCard = document.getElementById('jobSearchCard');
        const jobSearchIcon = document.getElementById('jobSearchToggle');
        if (jobSearchCard && !jobSearchCard.classList.contains('collapsed')) {
            jobSearchCard.classList.add('collapsed');
            jobSearchIcon.textContent = '+';
            jobSearchCard.querySelector('.collapsible-trigger').setAttribute('aria-expanded', 'false');
        }
    }
    
    // Toggle input cards (Resume, Job Description)
    function toggleInputCard(cardName) {
        const card = document.getElementById(cardName + 'Card');
        const content = document.getElementById(cardName + 'Content');
        const toggle = document.getElementById(cardName + 'Toggle');
        
        if (content.style.display === 'none') {
            content.style.display = 'block';
            toggle.textContent = '−';
            card.classList.remove('collapsed');
        } else {
            content.style.display = 'none';
            toggle.textContent = '+';
            card.classList.add('collapsed');
        }
    }
    
    // Toggle result cards (Strengths, Gaps)
    function toggleResultCard(cardName) {
        const card = document.getElementById(cardName + 'Card');
        const content = document.getElementById(cardName + 'Content');
        const toggle = document.getElementById(cardName + 'Toggle');
        
        if (card.classList.contains('collapsed')) {
            card.classList.remove('collapsed');
            toggle.textContent = '−';
        } else {
            card.classList.add('collapsed');
            toggle.textContent = '+';
        }
    }
    
    function collapseInputCards() {
        // Collapse resume card
        const resumeCard = document.getElementById('resumeCard');
        const resumeContent = document.getElementById('resumeContent');
        const resumeToggle = document.getElementById('resumeToggle');
        const resumeStatus = document.getElementById('resumeStatus');
        if (resumeContent) {
            resumeContent.style.display = 'none';
            resumeToggle.textContent = '+';
            resumeCard.classList.add('collapsed');
            const resumeText = document.getElementById('resumeText').value;
            if (resumeText) {
                resumeStatus.textContent = '✓ Loaded';
            }
        }
        
        // Collapse job card
        const jobCard = document.getElementById('jobCard');
        const jobContent = document.getElementById('jobContent');
        const jobToggle = document.getElementById('jobToggle');
        const jobStatus = document.getElementById('jobStatus');
        if (jobContent) {
            jobContent.style.display = 'none';
            jobToggle.textContent = '+';
            jobCard.classList.add('collapsed');
            const jobText = document.getElementById('jobDescription').value;
            if (jobText) {
                jobStatus.textContent = '✓ Loaded';
            }
        }
    }
    
    // Toggle kit cards (Application Kit, Interview Kit, Outreach Kit)
    function toggleKit(kitName) {
        const card = document.getElementById(kitName + 'KitCard');
        const icon = document.getElementById(kitName + 'KitToggle');
        const trigger = card.querySelector('.collapsible-trigger');
        if (card.classList.contains('collapsed')) {
            card.classList.remove('collapsed');
            icon.textContent = '−';
            trigger.setAttribute('aria-expanded', 'true');
        } else {
            card.classList.add('collapsed');
            icon.textContent = '+';
            trigger.setAttribute('aria-expanded', 'false');
        }
    }
    // ==========================================================================
    // MAIN ANALYSIS LOGIC (Two-call architecture)
    // ==========================================================================
    async function analyzeJob() {
        const jd = document.getElementById('jobDescription').value.trim();
        // Hide any previous inline error
        hideInlineError();
        // Collapse both helper cards
        collapseAllCards();
        
        // Get resume text
        resumeText = document.getElementById('resumeText').value.trim();
        if (!resumeText) { 
            showInlineError("Please paste your resume first.");
            return; 
        }
        if (resumeText.length < 100) { 
            showInlineError("Resume is too short. Please provide more details.");
            return; 
        }
        if (!jd) { 
            showInlineError("Please paste a job description.");
            return; 
        }
        // UI Reset
        document.getElementById('analysisResults').style.display = 'none';
        const btn = document.getElementById('analyzeBtn');
        const btnText = document.getElementById('btnText');
        btn.disabled = true;
        btnText.textContent = "Analyzing...";
        // START THE NEW ANIMATION (Auto-Scrolls now!)
        startLoadingAnim(); 
        let lastError = null;
        
        // === CALL 1: Resume Fit Analysis ===
        for (let attempt = 1; attempt <= MAX_RETRIES; attempt++) {
            try {
                if (attempt > 1) {
                    btnText.textContent = `Retry ${attempt}/${MAX_RETRIES}...`;
                    await sleep(RETRY_DELAY_MS);
                }
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        job_description: jd,
                        resume_text: resumeText,
                        request_type: 'resume_match' 
                    })
                });
                const data = await response.json();
                // Handle rate limiting (429) - don't retry, just inform user
                if (response.status === 429) {
                    stopLoadingAnim();
                    const retryMinutes = data.retryAfter ? Math.ceil(data.retryAfter / 60) : 5;
                    showErrorToast(data.error || `Rate limit exceeded. Please try again in ${retryMinutes} minutes.`, 10000);
                    btn.disabled = false;
                    btnText.textContent = "Analyze Fit";
                    return;
                }
                if (!response.ok) {
                    throw new Error(data.error || `Server Error ${response.status}`);
                }
                // Success - Call 1 complete
                analysisData = data;
                // STOP ANIMATION
                stopLoadingAnim();
                // Wait 500ms for the animation to finish closing, then show results
                setTimeout(() => {
                    renderResults(data);
                }, 500);
                btn.disabled = false;
                btnText.textContent = "Analyze Fit";
                
                // === CALL 2: Market Intel (runs in background, non-blocking) ===
                fetchMarketIntel(jd, data.job_title, data.company);
                
                return;
            } catch (error) {
                console.error(`Attempt ${attempt} failed:`, error);
                lastError = error;
                // Don't retry for non-transient errors
                if (!error.message.includes('fetch') && !error.message.includes('timed out') && !error.message.includes('unavailable')) {
                    break;
                }
            }
        }
        // Failure
        stopLoadingAnim();
        showErrorToast(`Analysis failed after ${MAX_RETRIES} attempts: ${lastError?.message || 'Unknown error'}`, 8000);
        btn.disabled = false;
        btnText.textContent = "Analyze Fit";
    }
    
    // === CALL 2: Market Intel (Background fetch) ===
    async function fetchMarketIntel(jobDescription, jobTitle, company) {
        // Show loading state in diagrams
        document.getElementById('salaryRange').textContent = 'Loading...';
        
        try {
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    request_type: 'market_intel',
                    job_description: jobDescription,
                    job_title: jobTitle,
                    company: company
                })
            });
            
            if (!response.ok) {
                throw new Error('Market intel request failed');
            }
            
            const intelData = await response.json();
            
            // Merge intel data into analysisData
            if (analysisData) {
                analysisData.salary_intel = intelData.salary_intel;
                analysisData.competition = intelData.competition;
                analysisData.flags = intelData.flags;
                analysisData.company_intel = intelData.company_intel;
                analysisData.timeline = intelData.timeline;
            }
            
            // Render the intel sections
            renderJobIntel(analysisData);
            // Company intel rendered in supercard research links
            
            // Market intel loaded successfully
        } catch (error) {
            console.error('[MARKET INTEL] Failed:', error.message);
            // Hide intel section on failure - don't show fake data
            if (intelSection) {
                intelSection.style.display = 'none';
            }
        }
    }
    // ==========================================================================
    // RENDER RESULTS
    // ==========================================================================
    function renderResults(data) {
        document.getElementById('analysisResults').style.display = 'block';
        
        // Collapse input cards when results show
        collapseInputCards();
        
        // Scroll to top of results smoothly
        setTimeout(() => {
            document.getElementById('analysisResults').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
        
        // 1. Score Hero - original layout with big score on left, arti next to verdict
        const scoreClass = data.score >= 80 ? 'score-high' : (data.score >= 60 ? 'score-mid' : 'score-low');
        const scoreHTML = `
            <div class="score-box">
                <div class="score-val">${data.score}%</div>
                <div class="score-label">Job Fit Score</div>
            </div>
            <div class="verdict-box">
                <div style="display: flex; align-items: flex-start; gap: 14px;">
                    <img src="arti.png" alt="Arti" style="width: 48px; height: 48px; flex-shrink: 0;">
                    <div>
                        <h3 style="margin-bottom: 8px;">${escapeHtml(data.verdict)}</h3>
                        <p style="opacity: 0.7; font-size: 14px; margin: 0;">
                            <strong>Role:</strong> ${escapeHtml(data.job_title)}<br>
                            <strong>Company:</strong> ${escapeHtml(data.company)}
                        </p>
                    </div>
                </div>
            </div>
        `;
        const scoreContainer = document.getElementById('matchScoreContainer');
        scoreContainer.className = `hero-grid ${scoreClass}`;
        scoreContainer.innerHTML = scoreHTML;
        
        // Count strengths and gaps
        const gaps = data.analysis ? data.analysis.filter(x => /gap|risk|missing/i.test(x)) : [];
        const matches = data.analysis ? data.analysis.filter(x => !/gap|risk|missing/i.test(x)) : [];
        
        // Update stats
        document.getElementById('strengthsCount').textContent = matches.length;
        document.getElementById('gapsCount').textContent = gaps.length;
        
        // Keywords stats
        const keywords = data.keywords || [];
        const matchedKeywords = keywords.filter(k => k.in_resume);
        const keywordsPercent = keywords.length > 0 ? Math.round((matchedKeywords.length / keywords.length) * 100) : 0;
        document.getElementById('keywordsPercent').textContent = `${keywordsPercent}%`;
        document.getElementById('keywordsCountLabel').textContent = `${matchedKeywords.length} matched, ${keywords.length - matchedKeywords.length} missing`;
        
        // Salary placeholder
        document.getElementById('salaryEstimate').textContent = '$---K';
        
        // Render keywords
        const keywordCloudNew = document.getElementById('keywordCloudNew');
        keywordCloudNew.innerHTML = '';
        keywords.forEach(k => {
            const tag = document.createElement('span');
            tag.className = `keyword-tag ${k.in_resume ? 'in-resume' : 'missing'}`;
            tag.textContent = k.term || k;
            keywordCloudNew.appendChild(tag);
        });
        
        // Render strengths (card starts collapsed)
        const strengthsList = document.getElementById('strengthsList');
        strengthsList.innerHTML = '';
        matches.forEach(item => {
            const li = document.createElement('li');
            li.className = 'analysis-item item-match';
            li.innerHTML = `<strong>Fit</strong> ${escapeHtml(item.replace(/^(Match:|Strength:)/i, '').trim())}`;
            strengthsList.appendChild(li);
        });
        const strengthsCard = document.getElementById('strengthsCard');
        strengthsCard.style.display = matches.length > 0 ? 'block' : 'none';
        strengthsCard.classList.add('collapsed');
        document.getElementById('strengthsToggle').textContent = '+';
        
        // Render gaps (card starts collapsed)
        const gapsList = document.getElementById('gapsList');
        gapsList.innerHTML = '';
        gaps.forEach(item => {
            const li = document.createElement('li');
            li.className = 'analysis-item item-gap';
            li.innerHTML = `<strong>Gap / Risk</strong> ${escapeHtml(item.replace(/^(Gap:|Risk:|Missing:)/i, '').trim())}`;
            gapsList.appendChild(li);
        });
        const gapsCard = document.getElementById('gapsCard');
        gapsCard.style.display = gaps.length > 0 ? 'block' : 'none';
        gapsCard.classList.add('collapsed');
        document.getElementById('gapsToggle').textContent = '+';
        
        // 3. Interview Questions
        const qList = document.getElementById('interviewQuestionsList');
        if (qList) {
            qList.innerHTML = '';
            if (data.interview_questions && data.interview_questions.length > 0) {
                data.interview_questions.forEach((q, i) => {
                    qList.innerHTML += `
                        <div class="qa-card">
                            <div class="qa-q">Q${i+1}: ${escapeHtml(q.question)}</div>
                            <div class="qa-a">${escapeHtml(q.suggested_answer)}</div>
                        </div>`;
                });
            } else {
                const iqSection = document.getElementById('interviewQuestionsSection');
                if (iqSection) iqSection.style.display = 'none';
            }
        }
        
        // 4. Gap Strategies
        const gList = document.getElementById('gapStrategiesList');
        if (gList) {
            gList.innerHTML = '';
            if (data.gap_strategies && data.gap_strategies.length > 0) {
                document.getElementById('gapStrategiesSection').style.display = 'block';
                data.gap_strategies.forEach(s => {
                    gList.innerHTML += `
                        <div class="qa-card" style="border-left: 6px solid var(--accent-clay);">
                            <div class="qa-q" style="background:#fff; border-bottom:1px solid #eee;">Gap: ${escapeHtml(s.gap)}</div>
                            <div class="qa-a">
                                <strong>Strategy:</strong> ${escapeHtml(s.strategy)}<br><br>
                                <em>"${escapeHtml(s.talking_points)}"</em>
                        </div>
                    </div>`;
            });
        } else {
            document.getElementById('gapStrategiesSection').style.display = 'none';
        }
        }
        
        // 5. Generate Resume Preview (now inside Application Kit)
        generateResumeHTML(data.tailored_summary);
        // Reset Intro Email
        document.getElementById('coverLetterDisplay').style.display = 'none';
        document.getElementById('coverLetterPlaceholder').style.display = 'block';
        document.getElementById('copyCLBtn').style.display = 'none';
        
        // 6. Render Keywords (inside Application Kit) - keep for backward compat
        renderKeywords(data);
        
        // 7. Render Network Finder (inside Outreach Kit)
        renderNetworkFinder(data);
        
        // 8. Render Follow-up Templates (inside Outreach Kit)
        renderTemplates(data);
        
        // 9. Show save to tracker button
        document.getElementById('saveToTrackerSection').style.display = 'block';
        
        // 10. Render Research Links in super card
        renderResearchLinks(data);
        
        // NOTE: Salary and timeline diagrams are populated by fetchMarketIntel() 
        // when Call 2 completes (runs in background)
    }
    
    function renderResearchLinks(data) {
        const container = document.getElementById('researchLinks');
        const section = document.getElementById('researchCompanySection');
        const company = data.company;
        
        if (!company || company === 'Not Specified' || company.toLowerCase().includes('not specified')) {
            section.style.display = 'none';
            return;
        }
        
        section.style.display = 'block';
        const enc = encodeURIComponent(company);
        
        container.innerHTML = `
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(recruiter%20OR%20talent%20OR%20HR)" target="_blank" class="network-link">Find Recruiters</a>
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(director%20OR%20VP%20OR%20executive)" target="_blank" class="network-link">Find Executives</a>
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(army%20OR%20military%20OR%20veteran%20OR%20special%20operations)" target="_blank" class="network-link">Find Veterans</a>
            <a href="https://www.glassdoor.com/Search/results.htm?keyword=${enc}" target="_blank" class="network-link">Glassdoor</a>
            <a href="https://www.google.com/search?q=${enc}+contract+award+news" target="_blank" class="network-link">Contract News</a>
        `;
    }
    // ==========================================================================
    // TAILORED SUMMARY DISPLAY
    // ==========================================================================
    function generateResumeHTML(aiSummary) {
        const out = document.getElementById('resumeOutput');
        out.innerHTML = `<h3 style="font-size: 14px; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px;">Tailored Executive Summary</h3>
            <p style="line-height: 1.7;">${escapeHtml(aiSummary)}</p>
            <p style="margin-top: 16px; font-size: 12px; opacity: 0.6;">Copy this summary and paste it into your resume, replacing your current executive summary.</p>`;
    }
    // ==========================================================================
    // INTRO EMAIL & UTILS
    // ==========================================================================
    async function generateCoverLetter() {
        if (!analysisData || !resumeText) return;
        const btn = document.getElementById('generateCoverLetterBtn');
        const originalText = btn.innerHTML;
        btn.innerHTML = "Writing Email..."; 
        btn.disabled = true;
        try {
            const res = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    request_type: "generate_intro_email", 
                    job_description: document.getElementById("jobDescription").value,
                    resume_text: resumeText,
                    analysis_data: analysisData 
                })
            });
            const data = await res.json();
            if(data.intro_email) {
                let cleanLetter = data.intro_email.replace(/\[.*?\]/g, '').trim();
                document.getElementById('coverLetterDisplay').textContent = cleanLetter;
                document.getElementById('coverLetterDisplay').style.display = 'block';
                document.getElementById('coverLetterPlaceholder').style.display = 'none';
                document.getElementById('copyCLBtn').style.display = 'inline-block';
            } else {
                throw new Error("No intro email returned");
            }
        } catch(e) { 
            showErrorToast("Error generating email: " + e.message); 
        } finally { 
            btn.innerHTML = originalText; 
            btn.disabled = false; 
        }
    }
    function copyResume() { 
        const btn = event.currentTarget;
        const originalText = btn.textContent;
        const text = document.getElementById('resumeOutput').innerText;
        navigator.clipboard.writeText(text).then(() => {
            btn.textContent = '✓ Copied!';
            btn.classList.add('copy-success');
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('copy-success');
            }, 1500);
        });
    }
    function copyCoverLetter() { 
        const btn = event.currentTarget;
        const originalText = btn.textContent;
        const text = document.getElementById('coverLetterDisplay').innerText;
        navigator.clipboard.writeText(text).then(() => {
            btn.textContent = '✓ Copied!';
            btn.classList.add('copy-success');
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('copy-success');
            }, 1500);
        });
    }
    function clearAll() { 
        // Clear job description and results, but KEEP the resume
        document.getElementById('jobDescription').value = ''; 
        document.getElementById('analysisResults').style.display = 'none';
        analysisData = null;
        // Note: resumeText and resumeText textarea are preserved for the next job
        clearExpertChat();
    }
    
    function clearEverything() {
        // Full reset including resume
        document.getElementById('resumeText').value = '';
        document.getElementById('resumeSelector').value = '';
        document.getElementById('jobDescription').value = ''; 
        document.getElementById('analysisResults').style.display = 'none';
        analysisData = null;
        resumeText = '';
        clearExpertChat();
    }
    
    function clearResume() {
        document.getElementById('resumeText').value = '';
        document.getElementById('resumeSelector').value = '';
        resumeText = '';
    }
    
    function loadSampleData() {
        // Sample resume - John Doe, federal sales professional
        const sampleResume = `JOHN DOE
Arlington, VA | johndoe@email.com | (703) 555-1234

CLEARANCE: Top Secret/SCI with Full Scope Polygraph

SUMMARY
Senior Federal Sales Executive with 15+ years driving revenue growth across Department of Defense and Intelligence Community accounts. Proven track record of closing $500M+ in federal cloud and IT contracts. Deep relationships with DoD CIOs, program executives, and acquisition leaders. Expert in navigating complex federal procurement cycles and building strategic partner ecosystems.

EXPERIENCE

Principal Federal Sales Manager | Major Cloud Provider | 2019-Present
- Lead DoD sales territory generating $180M+ annual revenue
- Closed $95M multi-year enterprise license agreement with Army customer
- Built partner ecosystem of 25+ defense contractors driving 40% of pipeline
- Achieved 145% of quota in FY23, 138% in FY22, President's Club both years
- Manage relationships with DISA, Army, Navy, and Air Force accounts
- Coordinate with solutions architects on technical requirements and ATO support

Senior Account Executive, Defense | Enterprise Software Company | 2015-2019
- Grew DoD territory from $12M to $67M in annual recurring revenue
- Led capture of $45M IDIQ contract with Navy customer
- Developed strategic account plans for top 15 DoD accounts
- Partnered with Lockheed Martin, Northrop Grumman, and GDIT on joint pursuits
- Consistently exceeded quota: 112%, 128%, 135%, 141% over four years

Federal Account Manager | Defense Contractor | 2010-2015
- Managed $35M book of business across Army and Intel Community accounts
- Supported $200M program capture as sales lead
- Built relationships with contracting officers and program managers
- Transitioned 8 accounts from on-premise to cloud solutions

Sales Representative | Technology Reseller | 2007-2010
- Developed new business in federal civilian and DoD markets
- Achieved Rookie of the Year, promoted twice in three years

EDUCATION
MBA, Georgetown University McDonough School of Business
B.S. Business Administration, Penn State University

CERTIFICATIONS
- AWS Cloud Practitioner
- Salesforce Certified Administrator
- MEDDIC Sales Methodology Certified

SKILLS
Federal Sales, DoD Procurement, Cloud Solutions, Strategic Partnerships,
Account Planning, Contract Negotiations, IDIQ/GWAC, FAR/DFARS,
Executive Relationships, Pipeline Management, Salesforce, Quota Achievement`;

        // Sample job description - AWS DoD Sales
        const sampleJD = `Principal DoD Sales Representative
Amazon Web Services (AWS) - Arlington, VA

About the Role:
AWS is seeking an experienced Principal DoD Sales Representative to drive adoption of cloud services across Department of Defense customers. You will be responsible for developing and executing sales strategies for a portfolio of DoD accounts, working closely with solutions architects, partners, and AWS leadership to accelerate cloud adoption.

Basic Qualifications:
- 10+ years of enterprise sales experience, with 7+ years selling to DoD customers
- Active Top Secret/SCI clearance with Full Scope Polygraph
- Track record of exceeding sales quotas of $50M+ annually
- Experience selling cloud, SaaS, or enterprise software solutions
- Bachelor's degree required

Preferred Qualifications:
- Experience selling cloud infrastructure (AWS, Azure, GCP)
- Established relationships with DoD CIOs and program executives
- Experience with DoD procurement vehicles (IDIQ, BPA, GWACs)
- Understanding of FedRAMP, IL4/IL5/IL6 requirements
- MBA or advanced degree
- AWS certifications
- Experience working with defense prime contractors and system integrators
- MEDDIC or similar sales methodology experience

Responsibilities:
- Own full sales cycle for assigned DoD accounts
- Develop account strategies and territory plans to exceed revenue targets
- Build and maintain executive relationships with DoD customers
- Collaborate with solutions architects on technical requirements
- Coordinate with partners to drive joint opportunities
- Provide accurate forecasting and pipeline management
- Support ATO and security accreditation processes
- Represent AWS at DoD industry events and conferences

Compensation: $200,000 - $280,000 OTE (base + variable)
Location: Arlington, VA (customer site visits required)

Amazon is an Equal Opportunity Employer.`;

        document.getElementById('resumeText').value = sampleResume;
        document.getElementById('jobDescription').value = sampleJD;
        document.getElementById('resumeSelector').value = '';
        showErrorToast('Sample data loaded. Click "Analyze Fit" to see how it works.', 4000);
    }
    // ==========================================================================
    // ASK AN EXPERT
    // ==========================================================================
    let recruiterChatHistory = [];
    async function askExpert() {
        const questionInput = document.getElementById('recruiterQuestion');
        const question = questionInput.value.trim();
        if (!question) {
            showErrorToast('Please enter a question.');
            return;
        }
        if (!analysisData || !resumeText) {
            showErrorToast('Please analyze a job first before asking questions.');
            return;
        }
        const btn = document.getElementById('askRecruiterBtn');
        const btnText = document.getElementById('askRecruiterBtnText');
        const originalText = btnText.textContent;
        const chatContainer = document.getElementById('recruiterChatHistory');
        // Show chat container
        chatContainer.style.display = 'block';
        // Add user message to UI
        const userMsg = document.createElement('div');
        userMsg.className = 'recruiter-message user';
        userMsg.innerHTML = `<span class="user-label">You</span><p>${escapeHtml(question)}</p>`;
        chatContainer.appendChild(userMsg);
        // Add to history
        recruiterChatHistory.push({ role: 'user', content: question });
        // Clear input
        questionInput.value = '';
        // Show thinking indicator
        const thinkingEl = document.createElement('div');
        thinkingEl.className = 'recruiter-thinking';
        thinkingEl.textContent = 'Thinking...';
        chatContainer.appendChild(thinkingEl);
        // Scroll to bottom
        chatContainer.scrollTop = chatContainer.scrollHeight;
        // Disable button
        btnText.textContent = 'Asking...';
        btn.disabled = true;
        try {
            const res = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    request_type: 'ask_expert',
                    question: question,
                    job_description: document.getElementById('jobDescription').value,
                    resume_text: resumeText,
                    analysis_data: analysisData,
                    chat_history: recruiterChatHistory.slice(-10)
                })
            });
            const data = await res.json();
            // Remove thinking indicator
            thinkingEl.remove();
            if (data.error) {
                throw new Error(data.error);
            }
            if (data.response) {
                // Add expert response to UI
                const assistantMsg = document.createElement('div');
                assistantMsg.className = 'recruiter-message assistant';
                assistantMsg.innerHTML = formatExpertResponse(data.response);
                chatContainer.appendChild(assistantMsg);
                // Add to history
                recruiterChatHistory.push({ role: 'assistant', content: data.response });
                // Scroll to bottom
                chatContainer.scrollTop = chatContainer.scrollHeight;
            } else {
                throw new Error('No response received');
            }
        } catch (e) {
            thinkingEl.remove();
            showErrorToast('Error: ' + e.message);
        } finally {
            btnText.textContent = originalText;
            btn.disabled = false;
        }
    }
    function formatExpertResponse(text) {
        // Convert markdown-style formatting to HTML with proper paragraphs
        let formatted = escapeHtml(text)
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>');
        // Split into paragraphs and wrap each
        const paragraphs = formatted.split(/\n\n+/).filter(p => p.trim());
        const bodyHtml = paragraphs.map(p => `<p>${p.replace(/\n/g, '<br>')}</p>`).join('');
        const headerHtml = `
            <div class="recruiter-header">
                <img src="arti.png" alt="Expert" class="recruiter-avatar">
                <div class="recruiter-info">
                    <div class="recruiter-name">Expert</div>
                    <div class="recruiter-title">Federal Recruiting Specialist</div>
                </div>
            </div>
        `;
        return headerHtml + bodyHtml;
    }
    function clearExpertChat() {
        recruiterChatHistory = [];
        const chatContainer = document.getElementById('recruiterChatHistory');
        if (chatContainer) {
            chatContainer.innerHTML = '';
            chatContainer.style.display = 'none';
        }
        const questionInput = document.getElementById('recruiterQuestion');
        if (questionInput) {
            questionInput.value = '';
        }
    }
    
    // ==========================================================================
    // NEW: JOB INTEL DASHBOARD (Using AI-generated data)
    // ==========================================================================
    function renderJobIntel(data) {
        // Salary Intelligence (from AI)
        if (data.salary_intel) {
            const sal = data.salary_intel;
            document.getElementById('salaryRange').textContent = `$${sal.low}K - $${sal.high}K`;
            document.getElementById('salaryLow').textContent = `$${sal.low}K`;
            document.getElementById('salaryHigh').textContent = `$${sal.high}K`;
            
            // Update stat card
            document.getElementById('salaryEstimate').textContent = `$${sal.mid}K`;
            
            // Position the target marker
            const range = sal.high - sal.low;
            const targetPos = ((sal.mid - sal.low) / range) * 100;
            const marker = document.querySelector('.salary-marker');
            if (marker) {
                marker.style.left = `${targetPos}%`;
                marker.setAttribute('data-label', `Target: $${sal.mid}K`);
            }
            
            // Add notes if available
            const salaryIntel = document.getElementById('salaryIntel');
            if (salaryIntel && sal.notes) {
                const existingNotes = salaryIntel.querySelector('.panel-notes');
                if (existingNotes) existingNotes.remove();
                const notesDiv = document.createElement('div');
                notesDiv.className = 'panel-notes';
                notesDiv.textContent = sal.notes;
                salaryIntel.appendChild(notesDiv);
            }
        }
        
        // Hiring Timeline (from AI)
        if (data.timeline) {
            const tl = data.timeline;
            // Backend returns strings like "1-2" or numbers
            document.getElementById('screenTime').textContent = typeof tl.screen_weeks === 'string' ? `${tl.screen_weeks} wks` : `${tl.screen_weeks}-${tl.screen_weeks + 1} wks`;
            document.getElementById('interviewTime').textContent = typeof tl.interview_weeks === 'string' ? `${tl.interview_weeks} wks` : `${tl.interview_weeks}-${tl.interview_weeks + 1} wks`;
            document.getElementById('offerTime').textContent = typeof tl.offer_weeks === 'string' ? `${tl.offer_weeks} wks` : `${tl.offer_weeks}-${tl.offer_weeks + 1} wks`;
            
            // Add timeline notes if available
            const timelineNotes = document.getElementById('timelineNotes');
            if (timelineNotes && tl.notes) {
                timelineNotes.textContent = tl.notes;
                timelineNotes.style.display = 'block';
            }
        }
        
        // Competition Level (from AI)
        if (data.competition) {
            document.getElementById('competitionLevel').textContent = data.competition.level;
            document.getElementById('competitionDesc').textContent = data.competition.reasoning;
        }
    }
    
    // ==========================================================================
    // KEYWORD EXTRACTION (Using AI-generated data)
    // ==========================================================================
    function renderKeywords(data) {
        const cloud = document.getElementById('keywordCloud');
        cloud.innerHTML = '';
        
        // If no keywords, show message
        if (!data.keywords || data.keywords.length === 0) {
            cloud.innerHTML = '<span style="opacity: 0.6; font-size: 13px;">No keywords extracted</span>';
            return;
        }
        
        data.keywords.forEach(kw => {
            const tag = document.createElement('span');
            tag.className = `keyword-tag ${kw.in_resume ? 'in-resume' : 'missing'}`;
            tag.innerHTML = `${escapeHtml(kw.term)}`;
            
            // Add importance indicator
            if (kw.importance === 'critical') {
                tag.innerHTML += ' <span style="font-size:9px; opacity:0.7;">★</span>';
                tag.title = `CRITICAL: ${kw.in_resume ? 'Already in your resume' : 'Should add to resume'}`;
            } else {
                tag.title = kw.in_resume ? 'In your resume' : 'Consider adding';
            }
            
            cloud.appendChild(tag);
        });
    }
    
    function copyKeywords() {
        if (!analysisData || !analysisData.keywords) return;
        const keywords = analysisData.keywords.map(k => k.term);
        navigator.clipboard.writeText(keywords.join(', ')).then(() => {
            showErrorToast('Keywords copied to clipboard!', 2000);
        });
    }
    
    // Alias for new button
    function copyKeywordsNew() { copyKeywords(); }
    
    // ==========================================================================
    // NETWORK FINDER (generates search URLs for Outreach Kit)
    // ==========================================================================
    function renderNetworkFinder(data) {
        const company = data.company;
        const container = document.getElementById('networkLinks');
        if (!container) return;
        
        if (!company || company === 'Not Specified' || company.toLowerCase().includes('not specified')) {
            document.getElementById('networkCompany').textContent = 'Unknown Company';
            container.innerHTML = '<span style="opacity: 0.6; font-size: 13px;">Company not identified</span>';
            return;
        }
        
        document.getElementById('networkCompany').textContent = company;
        const enc = encodeURIComponent(company);
        
        container.innerHTML = `
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(recruiter%20OR%20talent%20OR%20HR)" target="_blank" class="network-link">Find Recruiters</a>
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(director%20OR%20VP%20OR%20executive)" target="_blank" class="network-link">Find Executives</a>
            <a href="https://www.linkedin.com/search/results/people/?keywords=${enc}%20AND%20(army%20OR%20military%20OR%20veteran%20OR%20special%20operations)" target="_blank" class="network-link">Find Veterans</a>
            <a href="https://www.glassdoor.com/Search/results.htm?keyword=${enc}" target="_blank" class="network-link">Glassdoor</a>
            <a href="https://www.google.com/search?q=${enc}+contract+award+news" target="_blank" class="network-link">Contract News</a>
        `;
    }
    
    // ==========================================================================
    // NEW: FOLLOW-UP TEMPLATES (Personalized with AI data)
    // ==========================================================================
    let currentTemplate = 'applied';
    
    function renderTemplates(data) {
        const company = data.company && data.company !== 'Not Specified' ? data.company : '[Company]';
        const role = data.job_title || '[Role]';
        
        // Get salary target for negotiation template
        const salaryTarget = data.salary_intel ? `$${data.salary_intel.mid}K - $${data.salary_intel.high}K` : '[TARGET SALARY]';
        const salaryReasoning = data.salary_intel ? data.salary_intel.notes : 'market research and role requirements';
        
        // Get top matches for the intro email
        const topMatches = data.analysis ? data.analysis.filter(a => a.toLowerCase().startsWith('match:')).slice(0, 2) : [];
        const matchHighlights = topMatches.length > 0 
            ? topMatches.map(m => m.replace(/^match:\s*/i, '').split('→')[0].trim()).join(' and ')
            : 'relevant federal market experience';
        
        document.getElementById('templateApplied').textContent = `Subject: Following Up – ${role} Application

Hi [Recruiter Name],

I recently submitted my application for the ${role} position at ${company} and wanted to follow up to express my continued interest.

My background in ${matchHighlights} aligns well with what you're looking for, and I'm confident I can contribute to your team's success.

I'd welcome the opportunity to discuss how my experience can contribute to ${company}'s mission. Would you have 15-20 minutes for a brief call this week?

Best regards,
[Your Name]
[Your Phone]`;
        
        document.getElementById('templateInterview').textContent = `Subject: Thank You – ${role} Interview

Hi [Interviewer Name],

Thank you for taking the time to meet with me today regarding the ${role} position. I enjoyed learning more about ${company}'s priorities and challenges.

Our conversation reinforced my enthusiasm for this opportunity. I was particularly interested in [specific topic discussed], and I'm confident my experience with ${matchHighlights} would allow me to contribute immediately.

Please don't hesitate to reach out if you need any additional information. I look forward to hearing about next steps.

Best regards,
[Your Name]
[Your Phone]`;
        
        document.getElementById('templateFollowup').textContent = `Subject: Checking In – ${role} Position

Hi [Recruiter Name],

I hope this message finds you well. I wanted to check in on the status of the ${role} position at ${company}.

I remain very interested in this opportunity and am happy to provide any additional information that would be helpful for your decision-making process.

Is there an updated timeline you can share for next steps?

Best regards,
[Your Name]
[Your Phone]`;
        
        document.getElementById('templateNegotiate').textContent = `Subject: RE: ${role} Offer Discussion

Hi [Recruiter/Hiring Manager],

Thank you for extending the offer for the ${role} position. I'm excited about the opportunity to join ${company}.

After reviewing the offer and considering ${salaryReasoning}, I'd like to discuss the compensation package. Based on my background and the value I'll bring, I believe a base salary in the range of ${salaryTarget} would be appropriate.

I'm also interested in discussing [signing bonus / equity / PTO / start date flexibility].

I'm committed to making this work and look forward to finding a package that reflects the mutual fit.

Best regards,
[Your Name]
[Your Phone]`;
        
        showTemplate('applied');
    }
    
    function showTemplate(type) {
        currentTemplate = type;
        const templates = ['applied', 'interview', 'followup', 'negotiate'];
        templates.forEach(t => {
            const el = document.getElementById('template' + t.charAt(0).toUpperCase() + t.slice(1));
            if (el) el.style.display = t === type ? 'block' : 'none';
        });
        document.querySelectorAll('.template-tab').forEach((tab, i) => {
            tab.classList.toggle('active', templates[i] === type);
        });
    }
    
    function copyCurrentTemplate() {
        const templateId = 'template' + currentTemplate.charAt(0).toUpperCase() + currentTemplate.slice(1);
        const el = document.getElementById(templateId);
        if (el) {
            navigator.clipboard.writeText(el.textContent).then(() => {
                showErrorToast('Template copied to clipboard!', 2000);
            });
        }
    }
    
    // ==========================================================================
    // NEW: APPLICATION TRACKER (localStorage)
    // ==========================================================================
    let trackedJobs = [];
    
    function initTracker() {
        const stored = localStorage.getItem('dougOMaticTracker');
        if (stored) {
            try {
                trackedJobs = JSON.parse(stored);
                renderTracker();
            } catch (e) {
                trackedJobs = [];
            }
        }
    }
    
    function saveToTracker() {
        if (!analysisData) return;
        
        const job = {
            id: Date.now(),
            company: analysisData.company || 'Unknown',
            role: analysisData.job_title || 'Unknown Role',
            score: analysisData.score || 0,
            status: 'saved',
            date: new Date().toLocaleDateString(),
            jd: document.getElementById('jobDescription').value.substring(0, 500),
            analysis: analysisData
        };
        
        // Check for duplicates
        const exists = trackedJobs.some(j => j.company === job.company && j.role === job.role);
        if (exists) {
            showErrorToast('This job is already in your tracker!', 3000);
            return;
        }
        
        trackedJobs.unshift(job);
        localStorage.setItem('dougOMaticTracker', JSON.stringify(trackedJobs));
        renderTracker();
        
        const btn = document.getElementById('saveToTrackerBtn');
        btn.textContent = '✓ Saved!';
        btn.disabled = true;
        setTimeout(() => {
            btn.textContent = 'Save to Tracker';
            btn.disabled = false;
        }, 2000);
    }
    
    function renderTracker() {
        const count = document.getElementById('trackerCount');
        const empty = document.getElementById('trackerEmpty');
        const table = document.getElementById('trackerTableContainer');
        const tbody = document.getElementById('trackerBody');
        
        count.textContent = `${trackedJobs.length} job${trackedJobs.length !== 1 ? 's' : ''} tracked`;
        
        if (trackedJobs.length === 0) {
            empty.style.display = 'block';
            table.style.display = 'none';
            return;
        }
        
        empty.style.display = 'none';
        table.style.display = 'block';
        
        tbody.innerHTML = trackedJobs.map(job => `
            <tr>
                <td><strong>${escapeHtml(job.company)}</strong></td>
                <td>${escapeHtml(job.role)}</td>
                <td><span class="intel-badge ${job.score >= 75 ? 'green' : job.score >= 50 ? 'gold' : 'clay'}">${job.score}%</span></td>
                <td>
                    <select class="status-select" onchange="updateJobStatus(${job.id}, this.value)" style="padding: 4px 8px; font-size: 12px; border: 1px solid var(--ink-black); border-radius: 4px;">
                        <option value="saved" ${job.status === 'saved' ? 'selected' : ''}>Saved</option>
                        <option value="applied" ${job.status === 'applied' ? 'selected' : ''}>Applied</option>
                        <option value="interviewing" ${job.status === 'interviewing' ? 'selected' : ''}>Interviewing</option>
                        <option value="offered" ${job.status === 'offered' ? 'selected' : ''}>Offered</option>
                        <option value="rejected" ${job.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                    </select>
                </td>
                <td>${job.date}</td>
                <td>
                    <div class="tracker-actions">
                        <button class="tracker-btn" onclick="loadTrackedJob(${job.id})">Load</button>
                        <button class="tracker-btn" onclick="deleteTrackedJob(${job.id})">×</button>
                    </div>
                </td>
            </tr>
        `).join('');
    }
    
    function updateJobStatus(id, status) {
        const job = trackedJobs.find(j => j.id === id);
        if (job) {
            job.status = status;
            localStorage.setItem('dougOMaticTracker', JSON.stringify(trackedJobs));
        }
    }
    
    function loadTrackedJob(id) {
        const job = trackedJobs.find(j => j.id === id);
        if (job && job.analysis) {
            document.getElementById('jobDescription').value = job.jd || '';
            analysisData = job.analysis;
            renderResults(job.analysis);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
    
    function deleteTrackedJob(id) {
        if (confirm('Remove this job from tracker?')) {
            trackedJobs = trackedJobs.filter(j => j.id !== id);
            localStorage.setItem('dougOMaticTracker', JSON.stringify(trackedJobs));
            renderTracker();
        }
    }
    
    // Initialize tracker on page load
    document.addEventListener('DOMContentLoaded', () => {
        initTracker();
        updateResumeSelector();
        loadLastUsedResume();
    });
</script>
<!-- Error Toast (for API/network errors) -->
<div id="errorToast" class="error-toast" role="alert" aria-live="assertive">
    <span id="errorToastText"></span>
    <button class="error-toast-close" onclick="hideErrorToast()" aria-label="Dismiss error message">×</button>
</div>
</body>
</html>